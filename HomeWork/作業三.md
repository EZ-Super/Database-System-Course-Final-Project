題目 ： 全方位電商平台智慧型資料庫系統
===


# 系統需求說明：
## 使用者角色
* 買家：註冊、搜尋商品、下單、付款、評價
* 賣家：註冊、上架商品、管理訂單、回覆評價
* 管理員：審核賣家、處理糾紛、管理平台內容
* 用戶帳號系統
* 商品瀏覽與搜尋
* 購物車與結帳流程
* 訂單追蹤
* 即時訊息系統
* 評價與留言系統
* 管理後台（審核商品、管理會員）
* JWT Token 金鑰登入管理
* 價格走勢

## 帳號系統
* 使用者可註冊帳號並驗證電子郵件/手機號碼
* 使用者可設定角色（買家/賣家）

## 商品上架與管理
* 賣家可以新增、編輯、刪除商品
* 商品需包含：名稱、描述、圖片、價格、庫存數量

## 購物流程
* 買家可將商品加入購物車
* 結帳需選擇配送地址與付款方式
* 系統發送訂單通知
 
## 評價系統
* 購買完成後可對賣家與商品評分
* 可留文字評論與圖片
 
## 使用者認證與權限驗證
* 使用者登入後，伺服器回傳 JWT Token（含 Access 與 Refresh Token）
* 所有需要登入權限的操作（如新增商品、下單）均需在 Header 中帶入 Access Token
* Token 逾時後可透過 Refresh Token 自動更新
* 管理員角色驗證以 JWT 中的角色欄位為依據
 
## 價格走勢分析
* 查看某商品歷史價格變化（可針對單一商品或類別分析）
* 支援比較同類型商品的價格趨勢安全性
* 使用 HTTPS 通訊協定
* 密碼加密存儲（如 bcrypt）
* 防止 SQL injection、XSS 攻擊等
* JWT 認證機制
	* Token 有效期限：Access Token 有效 3小時
	* 防止 CSRF：Token 儲存於 HttpOnly cookie 時須實作 CSRF 保護策略
	* JWT 採 RSA私鑰加密，公鑰對於竄改進行驗證
 

# ER Diagram及詳細說明：

![image](https://github.com/EZ-Super/Database-System-Course-Final-Project/blob/main/image/ER%20Diagram.jpg)

## 四大核心實體 (Entity)

* users (使用者) - 系統使用者的主要實體
* products (商品) - 產品資訊的主要實體
* orders (訂單) - 訂單資訊的主要實體
* warehouses (倉庫) - 倉庫資訊的主要實體

## Weak Entities

* order_items (訂單明細) - 依賴於orders和products的弱實體
* inventory (庫存) - 依賴於products和warehouses的弱實體
* sellers (賣家) - 依賴於users的弱實體

## Independent Entities

suppliers (供應商) - 保留為獨立實體，與products有供應關係

## Relationship Descriptions

* 一個 users (使用者) 可以發送多條訊息給其他使用者，而一個使用者也可以收到多條來自其他使用者的訊息。
  	* 每位使用者作為「發送者」可以發送多則訊息(1對N)
	* 每位使用者作為「接收者」可以接收多則訊息(1對N)
	* 每則訊息只有一個「發送者」和一個「接收者」
* 一個 users (使用者) 可以成為零個或一個 sellers (賣家)，而每個賣家必定對應一個使用者。
* 一個 users (使用者) 可以下多個 orders (訂單)，每個訂單只能由一個使用者下單。
* 一個 orders (訂單) 可以包含多個 order_items (訂單明細)，而每個訂單明細必須屬於一個特定訂單。
* 一個 products (商品) 可以被包含於多個 order_items (訂單明細) 中，而每個訂單明細必定只包含一個商品。
* 一個 suppliers (供應商) 可以供應多個 products (商品)，一個商品可以由多個供應商供應。
* 一個 sellers (賣家) 可以銷售多個 products (商品)，一個商品只能由一個賣家銷售。
* 一個 products (商品) 必須屬於一個 categories (分類)，一個分類可以包含多個商品。
* 一個 products (商品) 可以存儲於多個 inventory (庫存) 記錄中，每筆庫存記錄只對應一個商品。
* 一個 warehouses (倉庫) 可以儲存多筆 inventory (庫存) 記錄，每筆庫存記錄只能存放在一個倉庫中。

## Attribute Relationships

* 一個 users (使用者) 擁有一個 AD_server (身份驗證) 屬性和一個 membership_levels (會員等級) 屬性。
* 一個 users (使用者) 可以有多筆 login_logs (登入日誌)、points (點數) 和 notifications (通知) 多值屬性。
* 一個 products (商品) 擁有一個 customer_feedback_stats (客戶反饋統計) 屬性和多個 reviews (評論) 多值屬性。
* 一個 orders (訂單) 擁有 payments (付款)、shipments (物流) 和 coupons (優惠券) 屬性，以及多個 return_refunds (退款) 多值屬性。
* 一個 warehouses (倉庫) 擁有多個 inbound_shipments (入庫)、outbound_shipments (出庫) 和 warehouse_transfers (調撥記錄) 多值屬性。

## Derived Data

系統中的統計分析資料被表示為Derived Data:


# DB Schema與說明

![shop2 - 複製](https://github.com/user-attachments/assets/9bf450d2-8037-4f5f-ad76-9c0a0e9eb727)


## TIMESTAMP 支援格式
* `2024-04-10T18:30:00`
* `2024-04-10T00:00:00`

## Username 、商店名稱 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* 允許長度 5~20

## mail 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `!#$%&'*+-/=?^_`{|}~"，並且不可為首尾字母`

## 密碼規格
* `0~9`
* `a~z`
* `A~Z`
* `# % $ @`
1.密碼設定長度至少為8個字元的字串。
2.無法使用重複、過於簡單且易於猜測或與帳號相同的字母或數字 (例如：aaa、abc、123...)。
3.必須包含一個特殊字元

## Phone 支援符號
* `0~9`
* 手機號碼開頭不可為 `0` 以外的數字
* 格式 09********

## 地址支援符號
* `0~9`
* 中文字符
* 長度不可超過 `255`

## 折扣率支援符號
* `0~9`
* 數值介於 `1~100`

## 商店描述、描述支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* emoji
* `!#$%&'*+-/=?^_`{|}~" `
* 長度不可大於 `255`

## 優惠券代碼 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* 長度介於 `10 ~ 30`

## 訊息內容 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* emoji
* `!#$%&'*+-/=?^_`{|}~" `



