題目 ： 全方位電商平台智慧型資料庫系統
===


# 系統需求說明：
## 使用者角色
* 買家：註冊、搜尋商品、下單、付款、評價
* 賣家：註冊、上架商品、管理訂單、回覆評價
* 管理員：審核賣家、處理糾紛、管理平台內容
* 用戶帳號系統
* 商品瀏覽與搜尋
* 購物車與結帳流程
* 訂單追蹤
* 即時訊息系統
* 評價與留言系統
* 管理後台（審核商品、管理會員）
* JWT Token 金鑰登入管理
* 價格走勢

## 帳號系統
* 使用者可註冊帳號並驗證電子郵件/手機號碼
* 使用者可設定角色（買家/賣家）

## 商品上架與管理
* 賣家可以新增、編輯、刪除商品
* 商品需包含：名稱、描述、圖片、價格、庫存數量

## 購物流程
* 買家可將商品加入購物車
* 結帳需選擇配送地址與付款方式
* 系統發送訂單通知
 
## 評價系統
* 購買完成後可對賣家與商品評分
* 可留文字評論與圖片
 
## 使用者認證與權限驗證
* 使用者登入後，伺服器回傳 JWT Token（含 Access 與 Refresh Token）
* 所有需要登入權限的操作（如新增商品、下單）均需在 Header 中帶入 Access Token
* Token 逾時後可透過 Refresh Token 自動更新
* 管理員角色驗證以 JWT 中的角色欄位為依據
 
## 價格走勢分析
* 查看某商品歷史價格變化（可針對單一商品或類別分析）
* 支援比較同類型商品的價格趨勢安全性
* 使用 HTTPS 通訊協定
* 密碼加密存儲（如 bcrypt）
* 防止 SQL injection、XSS 攻擊等
* JWT 認證機制
	* Token 有效期限：Access Token 有效 3小時
	* 防止 CSRF：Token 儲存於 HttpOnly cookie 時須實作 CSRF 保護策略
	* JWT 採 RSA私鑰加密，公鑰對於竄改進行驗證
 

# ER Diagram及詳細說明：

![image](https://github.com/EZ-Super/Database-System-Course-Final-Project/blob/main/image/ER%20Diagram.jpg)

## 四大核心實體 (Entity)

* users (使用者) - 系統使用者的主要實體
* products (商品) - 產品資訊的主要實體
* orders (訂單) - 訂單資訊的主要實體
* warehouses (倉庫) - 倉庫資訊的主要實體

## Weak Entities

* order_items (訂單明細) - 依賴於orders和products的弱實體
* inventory (庫存) - 依賴於products和warehouses的弱實體
* sellers (賣家) - 依賴於users的弱實體

## Independent Entities

suppliers (供應商) - 保留為獨立實體，與products有供應關係

## Relationship Descriptions

* 一個 users (使用者) 可以發送多條訊息給其他使用者，而一個使用者也可以收到多條來自其他使用者的訊息。
  	* 每位使用者作為「發送者」可以發送多則訊息(1對N)
	* 每位使用者作為「接收者」可以接收多則訊息(1對N)
	* 每則訊息只有一個「發送者」和一個「接收者」
* 一個 users (使用者) 可以成為零個或一個 sellers (賣家)，而每個賣家必定對應一個使用者。
* 一個 users (使用者) 可以下多個 orders (訂單)，每個訂單只能由一個使用者下單。
* 一個 orders (訂單) 可以包含多個 order_items (訂單明細)，而每個訂單明細必須屬於一個特定訂單。
* 一個 products (商品) 可以被包含於多個 order_items (訂單明細) 中，而每個訂單明細必定只包含一個商品。
* 一個 suppliers (供應商) 可以供應多個 products (商品)，一個商品可以由多個供應商供應。
* 一個 sellers (賣家) 可以銷售多個 products (商品)，一個商品只能由一個賣家銷售。
* 一個 products (商品) 必須屬於一個 categories (分類)，一個分類可以包含多個商品。
* 一個 products (商品) 可以存儲於多個 inventory (庫存) 記錄中，每筆庫存記錄只對應一個商品。
* 一個 warehouses (倉庫) 可以儲存多筆 inventory (庫存) 記錄，每筆庫存記錄只能存放在一個倉庫中。

## Attribute Relationships

* 一個 users (使用者) 擁有一個 AD_server (身份驗證) 屬性和一個 membership_levels (會員等級) 屬性。
* 一個 users (使用者) 可以有多筆 login_logs (登入日誌)、points (點數) 和 notifications (通知) 多值屬性。
* 一個 products (商品) 擁有一個 customer_feedback_stats (客戶反饋統計) 屬性和多個 reviews (評論) 多值屬性。
* 一個 orders (訂單) 擁有 payments (付款)、shipments (物流) 和 coupons (優惠券) 屬性，以及多個 return_refunds (退款) 多值屬性。
* 一個 warehouses (倉庫) 擁有多個 inbound_shipments (入庫)、outbound_shipments (出庫) 和 warehouse_transfers (調撥記錄) 多值屬性。

## Derived Data

系統中的統計分析資料被表示為Derived Data:

* sales_analysis (銷售分析)
* inventory_analytics (庫存分析)
* order_conversion_stats (訂單轉換率)
* shipment_performance (物流績效)


# DB Schema與說明

![shop2 - 複製](https://github.com/user-attachments/assets/9bf450d2-8037-4f5f-ad76-9c0a0e9eb727)


## TIMESTAMP 支援格式
* `2024-04-10T18:30:00`
* `2024-04-10T00:00:00`

## Username 、商店名稱 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* 允許長度 5~20

## mail 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `!#$%&'*+-/=?^_`{|}~"，並且不可為首尾字母`

## 密碼規格
* `0~9`
* `a~z`
* `A~Z`
* `# % $ @`
1.密碼設定長度至少為8個字元的字串。
2.無法使用重複、過於簡單且易於猜測或與帳號相同的字母或數字 (例如：aaa、abc、123...)。
3.必須包含一個特殊字元

## Phone 支援符號
* `0~9`
* 手機號碼開頭不可為 `0` 以外的數字
* 格式 09********

## 地址支援符號
* `0~9`
* 中文字符
* 長度不可超過 `255`

## 折扣率支援符號
* `0~9`
* 數值介於 `1~100`

## 商店描述、描述支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* emoji
* `!#$%&'*+-/=?^_`{|}~" `
* 長度不可大於 `255`

## 優惠券代碼 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* 長度介於 `10 ~ 30`

## 訊息內容 支援符號
* `0~9`
* `a~z`
* `A~Z`
* `_,-,@`
* emoji
* `!#$%&'*+-/=?^_`{|}~" `

# 資料完整性需求

## 登入相關
* 登入 :使用者名稱和密碼。程式將使用資料庫的整合安全性，因此這些資料不需要存儲在資料庫中。

| Field 名稱           | Data Type | 唯一 | Not Null | 預設值                    | 格式/限制                            | 說明                     |
|----------------------|-----------|------|----------|---------------------------|-------------------------------------|--------------------------|
| user_id (主鍵)       | INT UNSIGNED       | Y    | Y        | AUTO_INCREMENT            | 正整數                               | 每位使用者的唯一識別碼   |
| email                | STRING    | Y    | Y        | 無                        | 必須為有效 Email 格式                | 使用者註冊用 Email       |
| password_hash        | STRING    | N    | Y        | 無                        | 至少 8 字，含大小寫 + 數字 + 特殊符號（經過 bcrypt） | 雜湊後的使用者密碼       |
| Account Enable       | BOOL      | N    | Y        | True                      | 僅允許 True/False                    | 是否啟用帳號             |
| created_at           | TIMESTAMP | N    | Y        | CURRENT_TIMESTAMP         | 系統自動填入                         | 註冊時間                 |
| failed_login_attempts| INT       | N    | Y        | 0                         | 整數（< 5）                          | 登入失敗次數累計         |
| is_verified          | BOOL      | N    | Y        | 無                        | 僅允許 True/False                    | Email 是否完成驗證       |
| updated_at           | TIMESTAMP | N    | Y        | CURRENT_TIMESTAMP ON UPDATE | 自動更新                         | 資料更新時間             |

| 欄位名稱               |   限制方式                                                  | 理由說明                           |
|------------------------|---------------------------------------------------------------|------------------------------------|
| `email`                | 使用正規表達式驗證 Email 格式，禁止空白與非法字符            | 避免錯誤 Email 或注入              |
| `password_hash`        | 僅接受經 bcrypt 雜湊的密碼字串，不可為明文                    | 防止密碼洩漏與提升安全性            |
| `Account Enable`       | 僅允許布林值（True / False）                                 | 防止非預期類型輸入                  |
| `failed_login_attempts`| 限制最大值（如 < 5），自動鎖定邏輯應實作於應用層              | 防止暴力破解                        |
| `is_verified`          | 僅允許布林值（True / False）                                 | 明確判斷 Email 驗證狀態             |
| `created_at`           | 僅允許系統生成                                                | 防止偽造帳號註冊時間                |
| `updated_at`           | 僅允許系統自動更新                                            | 確保資料異動紀錄一致                |


---

*   登入紀錄 : 使用者登入紀錄。程式將使用資料庫的整合安全性，因此這些資料不需要存儲在資料庫中。

| Field 名稱           | Data Type     | 唯一 | Not Null | 預設值                | 格式/限制                             | 說明                         |
|----------------------|---------------|------|----------|------------------------|----------------------------------------|------------------------------|
| log_id (主鍵)        | INT UNSIGNED       | Y    | Y        | AUTO_INCREMENT         | 正整數                                 | 每筆登入紀錄的唯一識別碼     |
| user_id      | INT  UNSIGNED         | N    | Y       | 無                    | 外鍵參照 `Users` 表                         | 嘗試登入的使用者     |
| email                 | STRING        | N    | Y       | 無                    | 必須為有效 Email 格式                     | 嘗試登入的帳號（即使錯誤）   |
| login_time           | TIMESTAMP     | N    | Y        | CURRENT_TIMESTAMP      | 時間格式                               | 登入嘗試的發生時間           |
| ip_address           | STRING        | N    | Y        | 無                    | IPv4 或 IPv6 格式                     | 登入來源 IP                  |
| user_agent           | STRING(255)          | N    | N        | 無                    | -                                      | 使用者裝置資訊               |
| success              | BOOL          | N    | Y        | 無                    | 僅允許 True / False                   | 是否成功登入                 |
| failure_reason       | STRING(255)    | N    | N        | 無                    | 最長 255 字                            | 登入失敗原因（如密碼錯誤）   |

| 欄位名稱         |   限制方式                                                | 理由說明                           |
|------------------|-------------------------------------------------------------|------------------------------------|
| `email`          | 驗證合法 Email 格式，拒絕 HTML 特殊字元與 JS 字串           | 防止 XSS 與帳號偽造                |
| `ip_address`     | 僅允許合法 IPv4 / IPv6 格式                                  | 防止非預期輸入與錯誤紀錄           |
| `user_agent`     | 過濾特殊符號，  最大長度限制（255）                       | 防止過長 UA 被用作攻擊向量         |
| `failure_reason` | 限制最大長度、過濾換行與腳本內容                            | 避免將錯誤回報資訊作為 XSS 輸入    |
| `success`        | 僅允許布林值（True / False）                                | 防止邏輯錯誤與資料污染             |


---

## 商品管理

* Product : 關於買賣家刊登商品相關資料表

| 欄位名稱             | 資料型別         | 唯一 | NOT NULL | 預設值                              | 格式/限制                              | 說明                         |
|----------------------|------------------|------|----------|--------------------------------------|----------------------------------------|------------------------------|
| product_id (主鍵)    | INT UNSIGNED  | Y    | Y        | AUTO_INCREMENT                        | 正整數                                 | 商品唯一識別碼               |
| product_name         | STRING(255)      | N    | Y        | 無                                   | 最長 255 字                            | 商品名稱                     |
| sku                  | STRING(100)      | Y    | Y        | 無                                   | 唯一 SKU 編碼                          | 商品庫存單位識別碼           |
| brand                | STRING(100)      | N    | N        | 無                                   | -                                      | 商品品牌                     |
| model                | STRING(100)      | N    | N        | 無                                   | -                                      | 商品型號                     |
| description          | STRING (255)     | N    | N        | 無                                   |   最長 255 字                            | 商品描述                     |
| category_id          | INT UNSIGNED   | N    | Y        | 無                                   | 外鍵參照 `categories` 表              | 商品所屬分類                 |
| variant_type         | STRING(255)      | N    | N        | 無                                   | 例如：尺寸、顏色                       | 商品變體類型                 |
| price                | DECIMAL(10,2)    | N    | Y        | 無                                   | 金額格式（最多 99999999.99）           | 商品原價                     |
| promotional_price    | DECIMAL(10,2)    | N    | N        | 無                                   | 金額格式                               | 特價價格（如有）             |
| promotion_start_date | TIMESTAMP        | N    | N        | 無                                   | -                                      | 特價開始時間                 |
| promotion_end_date   | TIMESTAMP        | N    | N        | 無                                   | -                                      | 特價結束時間                 |
| seller_id            | INT UNSIGNED  | N    | N        | 無                                   | 外鍵參照 `sellers` 表                 | 所屬賣家 ID                  |
| shipping_weight      | DECIMAL(10,2)    | N    | N        | 0                                    | 單位：公斤                             | 運送重量                     |
| image_url            | STRING(255)      | N    | N        | 無                                   | URL 格式                               | 商品主圖網址                 |
| barcode              | STRING(50)       | N    | N        | 無                                   | 可為 EAN / UPC                         | 商品條碼                     |
| favorites_count      | INT              | N    | N        | 0                                    | 正整數                                 | 被加入最愛次數               |
| date_added           | TIMESTAMP        | N    | N        | CURRENT_TIMESTAMP                    | 系統時間                               | 建立時間                     |
| last_updated         | TIMESTAMP        | N    | N        | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 自動更新時間           | 最後更新時間                 |

* 欄位限制

| 欄位名稱         | 限制方式                                                   | 理由說明                                 | 
|------------------|----------------------------------------------------------------|------------------------------------------|
| `product_name`   | 僅允許中英文、數字、空格與基本符號，禁止 `< > " ' / \`         | 預防 XSS 攻擊、UI 錯誤顯示                | 
| `sku`            | 僅允許英數字、破折號、底線（`^[A-Z0-9_-]{1,100}$`）             | 保持一致性、防止資料污染與 SQL 注入       | 
| `brand`          | 限制輸入長度、禁止特殊 HTML 符號                              | 防止 XSS 或亂碼                          | 
| `model`          | 同上                                                          | 同上                                     | 
| `description`    | 可允許部分 HTML，但需進行白名單過濾或完整 HTML escape          | 防止 `<script>` 等惡意代碼               | 
| `variant_type`   | 限制為 Enum 或白名單值（如：Size, Color）                     | 防止使用者任意輸入，資料保持一致          | 
| `image_url`      | 僅允許合法 URL 格式（如 `https://...`），禁止嵌入腳本          | 避免圖片變成 iframe XSS 載體              | 
| `barcode`        | 僅允許數字 / 英數，固定長度（如 EAN-13）                      | 保證掃碼裝置可用、避免輸入亂碼            | 

---

* Category : 商品分類表

| 欄位名稱           | 資料型別     | 唯一 | NOT NULL | 預設值           | 格式/限制               | 說明                     |
|--------------------|--------------|------|----------|-------------------|--------------------------|--------------------------|
| category_id        | INT   UNSIGNED     | Y    | Y        | AUTO_INCREMENT    | 正整數                   | 分類唯一識別碼           |
| category_name      | STRING(255)  | Y    | Y        | 無                | 最長 255 字，唯一         | 分類名稱                 |
| category_description | STRING     | N    | N        | 無                | 無長度限制（原為 TEXT）   | 分類描述文字             |

* 欄位限制

| 欄位名稱           | 限制方式                                           | 理由說明                     |
|--------------------|--------------------------------------------------------|------------------------------|
| `category_name `     | 禁止特殊符號如 `<`, `>`, `"`, `'`，僅允許中英文與數字 | 避免 XSS 與資料亂碼           |
| `category_description` | HTML escape 或僅允許特定格式                           | 預防惡意 HTML 注入           |


---

* Review : 關於買家購買商品後評論

| 欄位名稱   | 資料型別       | 唯一 | NOT NULL | 預設值              | 格式/限制                  | 說明                     |
|------------|----------------|------|----------|----------------------|----------------------------|--------------------------|
| review_id  | INT  UNSIGNED       | Y    | Y        | AUTO_INCREMENT       | 正整數                     | 每筆評論的唯一識別碼     |
| product_id | INT   UNSIGNED      | N    | N        | 無                   | 外鍵參照 `products` 表     | 被評論的商品 ID          |
| user_id    | INT    UNSIGNED        | N    | N        | 無                   | 外鍵參照 `users` 表        | 發表評論的使用者 ID      |
| rating     | INT            | N    | Y        | 無                   | 限制 1～5              | 評分數值（如星數）        |
| comment    | STRING         | N    | Y        | 無                   | 無長度限制（原為 TEXT）    | 評論內容文字             |
| created_at | TIMESTAMP      | N    | Y        | CURRENT_TIMESTAMP    | 自動記錄建立時間           | 評論建立時間             |

* 欄位限制

| 欄位名稱  | 限制方式                                       | 理由說明                       |
|-----------|----------------------------------------------------|--------------------------------|
| `rating`    | 限制為 1～5 的整數                                  | 避免超出評分邏輯範圍             |
| `comment`   | 禁止 `<`, `>`, `"`, `'`, `/` 等符號或進行 HTML escape | 預防 XSS 攻擊                   |

---

## 用戶管理

* membership_levels : 會員等級相關資料表

| 欄位名稱       | 資料型別      | 唯一 | NOT NULL | 預設值                                  | 格式/限制                      | 說明                     |
|----------------|---------------|------|----------|------------------------------------------|--------------------------------|--------------------------|
| level_id       | INT   UNSIGNED        | Y    | Y        | AUTO_INCREMENT                           | 正整數                         | 會員等級的唯一識別碼     |
| level_name     | STRING(255)   | N    | Y        | 無                                       | 最長 255 字                    | 會員等級名稱             |
| required_points| INT           | N    | Y        | 無                                       | 非負整數                       | 達到該等級所需的點數     |
| discount_rate  | DECIMAL(5,2)  | N    | Y        | 無                                       | 介於 0.00 ~ 100.00             | 該等級享有的折扣百分比   |
| created_at     | TIMESTAMP     | N    | N        | CURRENT_TIMESTAMP                        | 系統建立時間                   | 等級建立時間             |
| updated_at     | TIMESTAMP     | N    | N        | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 自動更新時間            | 等級資料更新時間         |

* 欄位限制

| 欄位名稱        | 限制方式                                           | 理由說明                       |
|-----------------|--------------------------------------------------------|--------------------------------|
| `level_name`      | 禁止特殊符號如 `<`, `>`, `"`, `'`                      | 避免 XSS、畫面顯示錯誤         |
| `required_points` | 限制為非負整數（如 `>= 0`）                            | 避免錯誤資料影響升級邏輯       |
| `discount_rate`   | 限制為 0.00～100.00 的浮點數                           | 避免過高或負數折扣             |

---

* users : 用戶相關資料

| 欄位名稱             | 資料型別     | 唯一 | NOT NULL | 預設值                | 格式/限制                          | 說明                         |
|----------------------|--------------|------|----------|------------------------|------------------------------------|------------------------------|
| user_id              | INT   UNSIGNED       | Y    | Y        | AUTO_INCREMENT         | 正整數                             | 使用者唯一識別碼             |
| username             | STRING(255)  | Y    | Y        | 無                     | 最長 255 字，唯一，不可為空         | 使用者名稱（登入帳號）       |
| email                | STRING(255)  | Y    | Y        | 無                     | 必須為有效 Email 格式              | 使用者 Email                  |
| phone                | STRING(20)   | N    | N        | 無                     | 手機格式，如 `09xxxxxxxx`          | 使用者電話號碼（可選填）     |
| registration_date    | TIMESTAMP    | N    | N        | CURRENT_TIMESTAMP      | 自動填入                           | 註冊時間                     |
| is_active            | BOOLEAN      | N    | N        | TRUE                   | 僅允許 TRUE / FALSE                | 是否啟用帳號                 |
| membership_level_id  | INT  UNSIGNED        | N    | N        | 無                     | 外鍵參照 `membership_levels` 表    | 對應會員等級                 |
| shipping_address     | STRING(255)  | N    | N        | 無                     | 最長 255 字                        | 收貨地址                     |
| billing_address      | STRING(255)  | N    | N        | 無                     | 最長 255 字                        | 帳單地址                     |

* 欄位限制

| 欄位名稱         | 限制方式                                                   | 理由說明                           |
|------------------|----------------------------------------------------------------|------------------------------------|
| `username`         | 僅允許中英文、數字、底線（禁止 `< > " ' /`）                    | 避免 XSS，確保帳號格式一致         |
| `email`            | 必須為合法 Email 格式                                           | 避免垃圾帳號或非通知用 Email       |
| `phone`            | 格式如 `^09\d{8}$` 或國際電話格式驗證                          | 確保電話格式正確                   |
| `shipping_address` | 禁止 `<`, `>`, `"` 等特殊符號，或使用輸出轉義                  | 避免前端渲染誤判、XSS              |
| `billing_address`  | 同上                                                           | 同上                               |

---

* sellers : 賣家相關資料表

| 欄位名稱         | 資料型別     | 唯一 | NOT NULL | 預設值                                  | 格式/限制                    | 說明                         |
|------------------|--------------|------|----------|------------------------------------------|------------------------------|------------------------------|
| seller_id        | INT  UNSIGNED        | Y    | Y        | AUTO_INCREMENT                           | 正整數                       | 賣家唯一識別碼               |
| user_id          | INT   UNSIGNED       | Y    | Y        | 無                                       | 外鍵參照 `users` 表          | 對應使用者帳號（1 對 1）     |
| store_name       | STRING(255)  | N    | Y        | 無                                       | 最長 255 字                  | 商店名稱                     |
| store_description| STRING       | N    | N        | 無                                       | 無長度限制（原為 TEXT）       | 商店描述                     |
| bank_account     | STRING(255)  | N    | N        | 無                                       | 字串（格式驗證）          | 收款帳戶資訊                 |
| created_at       | TIMESTAMP    | N    | N        | CURRENT_TIMESTAMP                        | 自動填入                     | 商店建立時間                 |
| updated_at       | TIMESTAMP    | N    | N        | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 自動更新時間          | 最後更新時間                 |

| 欄位名稱         | 限制方式                                                   | 理由說明                         |
|------------------|----------------------------------------------------------------|----------------------------------|
| `store_name`       | 禁止特殊符號 `<`, `>`, `"`, `'`, `/`，僅允許中英數與基本符號     | 避免 XSS 與顯示錯誤               |
| `store_description`| 須 HTML escape 或白名單格式過濾                                  | 避免 `<script>` 等攻擊內容注入   |
| `bank_account`     | 限制為純數字或銀行帳號格式（例：`XXX-XXXXXXXXX`）               | 避免亂碼或惡意內容寫入            |

---

* points : 會員積分相關資料表

| 欄位名稱         | 資料型別     | 唯一 | NOT NULL | 預設值                | 格式/限制                      | 說明                           |
|------------------|--------------|------|----------|------------------------|--------------------------------|--------------------------------|
| point_id         | INT   UNSIGNED       | Y    | Y        | AUTO_INCREMENT         | 正整數                         | 每筆點數紀錄的唯一識別碼       |
| user_id          | INT    UNSIGNED      | N    | Y        | 無                     | 外鍵參照 `users` 表            | 對應的使用者 ID                |
| points_earned    | INT          | N    | N        | 無                     | 限制為整數，可為負值（扣點） | 當次增加或扣除的點數           |
| transaction_date | TIMESTAMP    | N    | N        | CURRENT_TIMESTAMP      | 自動填入                       | 點數交易發生的時間             |
| description      | STRING(255)  | N    | N        | 無                     | 最長 255 字                    | 點數來源或用途說明             |

| 欄位名稱      | 限制方式                                           | 理由說明                         |
|---------------|--------------------------------------------------------|----------------------------------|
| `points_earned` | 限制為整數（可允許負數），不允許小數                   | 避免計算誤差與無效點數邏輯       |
| `description`   | 禁止 `<`, `>`, `"`, `'` 等特殊符號，或進行 HTML escape | 避免 XSS 攻擊與錯誤顯示          |

---

* coupon : coupon 相關資料表

| 欄位名稱        | 資料型別       | 唯一 | NOT NULL | 預設值           | 格式/限制                                       | 說明                           |
|-----------------|----------------|------|----------|------------------|------------------------------------------------|--------------------------------|
| coupon_id       | INT  UNSIGNED          | Y    | Y        | AUTO_INCREMENT   | 正整數                                           | 每張優惠券的唯一識別碼         |
| coupon_code     | STRING(255)    | Y    | Y        | 無               | 最長 255 字，唯一                               | 優惠券代碼                     |
| discount_amount | DECIMAL(10,2)  | N    | Y        | 無               | 正數，  `>= 0.00`                            | 折扣金額                       |
| expiry_date     | DATE           | N    | N        | 無               | 合法日期格式                                     | 優惠券到期日                   |
| usage_limit     | INT            | N    | N        | 無               | 整數，  `>= 0`                               | 可使用次數上限（NULL = 無限制）|
| is_active       | BOOLEAN        | N    | N        | TRUE             | 僅允許 TRUE / FALSE                             | 優惠券是否啟用                 |
| coupon_type     | ENUM           | N    | Y        | `'single_use'`   | 僅限 `'single_use'` 或 `'multi_use_limited'`    | 優惠券類型                     |
| created_at      | TIMESTAMP      | N    | N        | CURRENT_TIMESTAMP| 系統時間                                         | 建立時間                       |

| 欄位名稱          | 限制方式                                                  | 理由說明                         |
|-------------------|---------------------------------------------------------------|----------------------------------|
| `coupon_code`     | 僅允許英數與基本符號（ 正規表示式）                        | 防止 XSS 與代碼格式錯誤          |
| `discount_amount` | 限制為大於等於 0 的浮點數                                     | 避免負數造成加價邏輯錯誤         |
| `expiry_date`     | 限制為合法日期格式， 不得為過去時間（應用層邏輯）          | 保證活動邏輯正確                 |
| `usage_limit`     | 限制為整數 `>= 0`                                              | 避免負數導致邏輯錯亂             |
| `coupon_type`     | 限制為 ENUM 白名單值                                           | 避免注入與資料錯誤               |

---

* message : 買賣家訊息紀錄

| 欄位名稱          | 資料型別   | 唯一 | NOT NULL | 預設值                | 格式/限制                     | 說明                         |
|-------------------|------------|------|----------|------------------------|-------------------------------|------------------------------|
| message_id        | INT UNSIGNED       | Y    | Y        | AUTO_INCREMENT         | 正整數                        | 訊息唯一識別碼               |
| sender_id         | INT  UNSIGNED      | N    | Y        | 無                     | 外鍵參照 `users(user_id)`     | 發送者 ID                    |
| receiver_id       | INT  UNSIGNED      | N    | Y        | 無                     | 外鍵參照 `users(user_id)`     | 接收者 ID                    |
| message_content   | STRING     | N    | Y        | 無                     | 無長度限制（原為 TEXT）       | 訊息內容                     |
| send_time         | TIMESTAMP  | N    | N        | CURRENT_TIMESTAMP      | 自動填入時間                  | 訊息傳送時間                 |
| is_read           | BOOLEAN    | N    | N        | FALSE                  | 僅允許 TRUE / FALSE           | 是否已讀                     |

| 欄位名稱          | 限制方式                                                  | 理由說明                         |
|-------------------|---------------------------------------------------------------|----------------------------------|
| `message_content` | 僅允許文字或部分格式內容，需進行 HTML escape 或白名單過濾     | 預防 XSS（如 <script> 注入）     |

---

* notifications : 通知相關資料表

| 欄位名稱             | 資料型別     | 唯一 | NOT NULL | 預設值                | 格式/限制                        | 說明                               |
|----------------------|--------------|------|----------|------------------------|-----------------------------------|------------------------------------|
| notification_id      | INT  UNSIGNED        | Y    | Y        | AUTO_INCREMENT         | 正整數                            | 通知唯一識別碼                     |
| user_id              | INT  UNSIGNED        | N    | Y        | 無                     | 外鍵參照 `users(user_id)`         | 接收通知的使用者 ID                |
| notification_type    | STRING(50)   | N    | Y        | 無                     | 最長 50 字                        | 通知類型（如 order, promo, system）|
| subject              | STRING(255)  | N    | Y        | 無                     | 最長 255 字                       | 通知主題                           |
| message              | STRING       | N    | Y        | 無                     | 無長度限制（原為 TEXT）           | 通知內容                           |
| sent_at              | TIMESTAMP    | N    | N        | CURRENT_TIMESTAMP      | 系統自動填入                      | 通知發送時間                       |
| is_read              | BOOLEAN      | N    | N        | FALSE                  | TRUE / FALSE                      | 是否已讀                           |
| related_entity       | STRING(50)   | N    | N        | 無                     | 例如 'order', 'product', 'coupon' | 關聯實體名稱（模組）               |
| related_entity_id    | INT  UNSIGNED        | N    | N        | 無                     | 整數                              | 關聯實體的 ID                      |

| 欄位名稱            | 限制方式                                                   | 理由說明                         |
|---------------------|----------------------------------------------------------------|----------------------------------|
| `notification_type` | 僅允許英文、小寫字串， 使用 ENUM 或白名單                  | 避免錯誤值與資料不一致           |
| `subject`           | 禁止 `<`, `>`, `"`, `'`，可使用正規表示式限制內容格式           | 避免 XSS 與顯示錯誤              |
| `message`           |   HTML escape 或白名單過濾                                  | 避免 `<script>` 等惡意注入       |
| `related_entity`    |  使用 ENUM 或固定白名單值                                   | 避免模組名稱錯誤或注入           |


## 物流倉儲

* warehouses 

| 欄位名稱         | 資料型別    | 唯一 | NOT NULL | 預設值           | 格式/限制                       | 說明                         |
|------------------|-------------|------|----------|------------------|----------------------------------|------------------------------|
| `warehouse_id`   | INT  UNSIGNED         | Y    | Y        | AUTO_INCREMENT   |正整數                            | 倉庫唯一識別碼               |
| `warehouse_name` | STRING(100) | N    | Y        | 無               | 最長 100 字                     | 倉庫名稱                     |
| `location`       | STRING(255) | N    | Y        | 無               | 最長 255 字                     | 倉庫地址 / 位置              |
| `capacity`       | INT         | N    | Y        | 無               |  限制 ≥ 0                    | 倉儲容量                     |
| `manager_id`     | INT UNSIGNED | N    | N        | 無               | 外鍵參照 `Users(user_id)`       | 倉庫負責人 ID（UUID 格式）    |
| `contact_info`   | STRING(255) | N    | N        | 無               | 最長 255 字                     | 聯絡方式（電話/Email）       |
| `created_at`     | TIMESTAMP   | N    | N        | CURRENT_TIMESTAMP | 系統時間                        | 建立時間                     |

| 欄位名稱          |  限制方式                                                    | 理由說明                         |
|-------------------|------------------------------------------------------------------|----------------------------------|
| `warehouse_name`  | 禁止 `<`, `>`, `"`, `'` 等特殊符號，限長度                       | 避免 XSS、避免名稱格式錯誤        |
| `location`        |  禁止 HTML 標籤，必要時進行 escape 處理                      | 避免位置欄位出現惡意內容或亂碼    |
| `capacity`        | 限制為整數 ≥ 0                                                  | 避免負數容量導致邏輯錯誤          |
| `contact_info`    | 限制為 Email 或電話格式，可使用正規表示式驗證                    | 確保聯絡資訊可用、避免 HTML 注入  |

---

* inventory 

| 欄位名稱         | 資料型別    | 唯一 | NOT NULL | 預設值           | 格式/限制                             | 說明                             |
|------------------|-------------|------|----------|------------------|----------------------------------------|----------------------------------|
| `inventory_id`   | INT   UNSIGNED     | Y    | Y        | AUTO_INCREMENT    | 正整數                              | 庫存記錄的唯一識別碼             |
| `warehouse_id`   | INT   UNSIGNED     | N    | N        | 無               | 外鍵參照 `Warehouses(warehouse_id)`    | 所屬倉庫識別碼（UUID）            |
| `product_id`     | INT   UNSIGNED       | N    | N        | 無               | 外鍵參照 `Products(product_id)`        | 對應商品識別碼（UUID）            |
| `stock_quantity` | INT         | N    | N        | 0                | 整數， 限制為 `>= 0`               | 當前庫存數量                      |
| `reorder_level`  | INT         | N    | N        | 10               | 整數， 限制為 `>= 0`               | 庫存補貨臨界值                    |
| `last_updated`   | TIMESTAMP   | N    | N        | CURRENT_TIMESTAMP | 自動更新時間                          | 最後更新庫存時間                  |


| 欄位名稱         |  限制方式                            | 理由說明                         |
|------------------|-----------------------------------------|----------------------------------|
| `stock_quantity` | 限制為整數且 ≥ 0                        | 避免負庫存邏輯錯誤               |
| `reorder_level`  | 限制為整數且 ≥ 0                        | 避免負值導致自動補貨邏輯錯亂     |


---

* Suppliers : 供應商管理

| 欄位名稱        | 資料型別     | 唯一 | NOT NULL | 預設值           | 格式/限制                     | 說明                         |
|-----------------|--------------|------|----------|------------------|--------------------------------|------------------------------|
| `supplier_id`   | INT   UNSIGNED       | Y    | Y        | AUTO_INCREMENT   | 正整數                         | 供應商唯一識別碼             |
| `supplier_name` | STRING(100)  | N    | Y        | 無               | 最長 100 字                    | 供應商名稱                   |
| `contact_info`  | STRING(255)  | N    | N        | 無               | 電話、Email 或聯絡人格式       | 聯絡方式                     |
| `country`       | STRING(50)   | N    | N        | 無               | 國名、國碼或 ISO 代碼等         | 國家地區                     |
| `rating`        | INT          | N    | N        | 無               | 整數，限制為 1～5              | 評分等級                     |
| `created_at`    | TIMESTAMP    | N    | N        | CURRENT_TIMESTAMP | 自動填入系統時間               | 建立時間                     |

| 欄位名稱        |  限制方式                                             | 理由說明                         |
|-----------------|----------------------------------------------------------|----------------------------------|
| `supplier_name` | 禁止 `<`, `>`, `"`, `'` 等特殊符號， 限長度與格式      | 避免 XSS 與顯示錯誤               |
| `contact_info`  | 限制為電話或 Email 格式（可使用正規表示式）              | 確保聯絡資訊正確可用              |
| `country`       | 限制為 ISO 國碼或白名單格式                               | 避免亂碼或輸入不一致的國家名稱    |
| `rating`        | 僅允許整數，且需介於 1～5 之間                            | 符合評價邏輯，防止過高/過低分數     |


---

* Inbound_Shipments : 入庫記錄

| 欄位名稱        | 資料型別  | 唯一 | NOT NULL | 預設值     | 格式/限制                                    | 說明                         |
|-----------------|-----------|------|----------|------------|-----------------------------------------------|------------------------------|
| `inbound_id`    | INT  UNSIGNED     | Y    | Y        | AUTO_INCREMENT | 正整數                                 | 入庫記錄唯一識別碼           |
| `supplier_id`   | INT  UNSIGNED     | N    | N        | 無         | 外鍵參照 `Suppliers(supplier_id)`            | 供應商 ID                    |
| `warehouse_id`  | INT   UNSIGNED    | N    | N        | 無         | 外鍵參照 `Warehouses(warehouse_id)`          | 倉庫 ID                      |
| `product_id`    | INT  UNSIGNED     | N    | N        | 無         | 外鍵參照 `Products(product_id)`              | 商品 ID                      |
| `quantity`      | INT       | N    | Y        | 無         |  限制為整數且 ≥ 0                         | 入庫數量                     |
| `arrival_date`  | DATE      | N    | Y        | 無         | 合法日期格式                                 | 預計或實際到貨日期           |
| `status`        | ENUM      | N    | N        | `'pending'`| 僅限 `'pending'`, `'received'`, `'damaged'`  | 入庫狀態                     |

| 欄位名稱       |  限制方式                                             | 理由說明                         |
|----------------|----------------------------------------------------------|----------------------------------|
| `quantity`     | 限制為整數且 ≥ 0                                         | 避免負值造成入庫邏輯錯誤         |
| `arrival_date` | 必須為合法日期格式， 不可早於系統日期（邏輯控制）     | 避免異常過期或未來日期錯誤       |
| `status`       | 限制為 ENUM 白名單值                                     | 避免狀態錯誤或注入                |

---

* Outbound_Shipments  : 出庫記錄

| 欄位名稱        | 資料型別  | 唯一 | NOT NULL | 預設值       | 格式/限制                                       | 說明                         |
|-----------------|-----------|------|----------|--------------|------------------------------------------------|------------------------------|
| `outbound_id`   | INT  UNSIGNED     | Y    | Y        | AUTO_INCREMENT | 正整數                                      | 出貨記錄唯一識別碼           |
| `order_id`      | INT  UNSIGNED     | N    | N        | 無           | 外鍵參照 `Orders(order_id)`                    | 所屬訂單 ID                  |
| `warehouse_id`  | INT  UNSIGNED     | N    | N        | 無           | 外鍵參照 `Warehouses(warehouse_id)`            | 出貨倉庫 ID                  |
| `product_id`    | INT   UNSIGNED    | N    | N        | 無           | 外鍵參照 `Products(product_id)`                | 出貨商品 ID                  |
| `quantity`      | INT       | N    | Y        | 無           |  限制為整數且 ≥ 0                           | 出貨數量                     |
| `dispatch_date` | DATE      | N    | Y        | 無           | 合法日期格式                                   | 實際出貨日期                 |
| `status`        | ENUM      | N    | N        | `'preparing'`| 僅限 `'preparing'`, `'shipped'`, `'delivered'` | 出貨狀態                     |

| 欄位名稱        |  限制方式                                             | 理由說明                         |
|-----------------|----------------------------------------------------------|----------------------------------|
| `quantity`      | 限制為整數且 ≥ 0                                         | 避免負值造成邏輯錯誤             |
| `dispatch_date` | 限制為合法日期格式                                       | 避免錯誤出貨時間紀錄             |
| `status`        | 限制為 ENUM 白名單值                                     | 避免狀態錯誤、注入或資料異常     |

---



* Order_Items : 訂單商品

| 欄位名稱        | 資料型別      | 唯一 | NOT NULL | 預設值           | 格式/限制                                   | 說明                     |
|-----------------|---------------|------|----------|------------------|----------------------------------------------|--------------------------|
| `order_item_id` | INT   UNSIGNED        | Y    | Y        | AUTO_INCREMENT   | 正整數                                       | 訂單項目唯一識別碼       |
| `order_id`      | INT  UNSIGNED         | N    | N        | 無               | 外鍵參照 `Orders(order_id)`                  | 所屬訂單 ID              |
| `product_id`    | INT   UNSIGNED        | N    | N        | 無               | 外鍵參照 `Products(product_id)`              | 所屬商品 ID              |
| `quantity`      | INT           | N    | Y        | 無               |  限制為整數且 ≥ 1                         | 訂購數量                 |
| `price`         | DECIMAL(10,2) | N    | Y        | 無               |  限制為浮點數且 ≥ 0                        | 單項商品價格             |

| 欄位名稱     |  限制方式                               | 理由說明                     |
|--------------|--------------------------------------------|------------------------------|
| `quantity`   | 限制為整數且 ≥ 1                            | 避免負數與零造成邏輯錯誤     |
| `price`      | 限制為浮點數且 ≥ 0                          | 避免價格為負或錯誤計算       |

---

* Shipments : 物流配送

| 欄位名稱            | 資料型別      | 唯一 | NOT NULL | 預設值     | 格式/限制                                          | 說明                         |
|---------------------|---------------|------|----------|------------|-----------------------------------------------------|------------------------------|
| `shipment_id`       | INT    UNSIGNED       | Y    | Y        | AUTO_INCREMENT | 正整數                                          | 出貨記錄唯一識別碼           |
| `order_id`          | INT   UNSIGNED        | N    | N        | 無         | 外鍵參照 `Orders(order_id)`                        | 對應訂單 ID                  |
| `tracking_number`   | STRING(50)    | Y    | N        | 無         | 限英數字，避免特殊字元                             | 物流追蹤編號                 |
| `shipment_status`   | ENUM          | N    | Y        | 無         | 僅限 `preparing`, `shipped`, `delivered`            | 出貨狀態                     |
| `estimated_delivery`| DATE          | N    | N        | 無         | 合法日期格式                                       | 預計送達日                   |
| `actual_delivery`   | DATE          | N    | N        | 無         | 合法日期格式                                       | 實際送達日                   |
| `carrier`           | STRING(50)    | N    | N        | 無         | 如：DHL, FedEx, 自訂運輸商                          | 承運商名稱                   |
| `shipping_cost`     | DECIMAL(10,2) | N    | N        | 0.00       | 金額格式， 限制為 ≥ 0.00                        | 運費                         |

| 欄位名稱           |  限制方式                                           | 理由說明                         |
|--------------------|--------------------------------------------------------|----------------------------------|
| `tracking_number`  | 僅允許英數字，禁止 `<`, `>`, `"`, `'` 等特殊符號       | 避免 XSS 與排版錯誤              |
| `shipment_status`  | 僅允許 ENUM 白名單值                                    | 防止狀態錯誤或注入               |
| `estimated_delivery` / `actual_delivery` | 限合法日期格式，邏輯順序應合理     | 避免邏輯錯誤與資料矛盾           |
| `carrier`          | 禁止特殊符號、 限長度                               | 避免 XSS 或資料庫混亂            |
| `shipping_cost`    | 限制為 ≥ 0 的浮點數                                     | 避免負數導致錯誤計算             |

---

* Warehouse_Transfers : 倉庫內調撥

| 欄位名稱             | 資料型別  | 唯一 | NOT NULL | 預設值             | 格式/限制                                                    | 說明                         |
|----------------------|-----------|------|----------|---------------------|----------------------------------------------------------------|------------------------------|
| `transfer_id`        | INT   UNSIGNED    | Y    | Y        | AUTO_INCREMENT      | 正整數                                                       | 調撥記錄唯一識別碼           |
| `from_warehouse_id`  | INT  UNSIGNED     | N    | N        | 無                  | 外鍵參照 `Warehouses(warehouse_id)`                            | 調出倉庫 ID                  |
| `to_warehouse_id`    | INT   UNSIGNED    | N    | N        | 無                  | 外鍵參照 `Warehouses(warehouse_id)`                            | 調入倉庫 ID                  |
| `product_id`         | INT UNSIGNED      | N    | N        | 無                  | 外鍵參照 `Products(product_id)`                                | 商品 ID                      |
| `quantity`           | INT       | N    | Y        | 無                  |  限制為整數且 ≥ 1                                          | 調撥數量                     |
| `transfer_status`    | ENUM      | N    | N        | `'pending'`         | 僅限 `pending`, `in_transit`, `completed`                     | 調撥狀態                     |
| `transfer_date`      | TIMESTAMP | N    | N        | CURRENT_TIMESTAMP   | 系統時間自動填入                                              | 建立時間                     |

| 欄位名稱             |  限制方式                                            | 理由說明                         |
|----------------------|---------------------------------------------------------|----------------------------------|
| `quantity`           | 限制為整數且 ≥ 1                                        | 避免負值或零造成邏輯錯誤         |
| `transfer_status`    | 僅允許 ENUM 白名單值                                    | 避免資料注入與邏輯錯亂           |
| `from_warehouse_id` / `to_warehouse_id` | 不可相同                             | 須由應用層防止自我調撥            |

---



## 數據分析

* Sales_Analysis : 銷售分析

| 欄位名稱         | 資料型別      | 唯一 | NOT NULL | 預設值           | 格式/限制                                     | 說明                         |
|------------------|---------------|------|----------|------------------|------------------------------------------------|------------------------------|
| `record_id`      | INT  UNSIGNED         | Y    | Y        | AUTO_INCREMENT   | 正整數                                         | 分析紀錄唯一識別碼           |
| `date`           | DATE          | N    | Y        | 無               | 合法日期格式                                   | 統計日期                     |
| `product_id`     | INT  UNSIGNED         | N    | N        | 無               | 外鍵參照 `Products(product_id)`                | 所屬商品 ID                  |
| `category_id`    | INT  UNSIGNED         | N    | N        | 無               | 外鍵參照 `Categories(category_id)`             | 所屬分類 ID                  |
| `total_sales`    | INT           | N    | Y        | 無               | 限制為整數且 ≥ 0                               | 銷售數量                     |
| `revenue`        | DECIMAL(10,2) | N    | Y        | 無               | 限制為浮點數且 ≥ 0                             | 銷售總金額                   |
| `average_price`  | DECIMAL(10,2) | N    | Y        | 無               | 限制為浮點數且 ≥ 0                             | 平均單價                     |

| 欄位名稱         |  限制方式                           | 理由說明                       |
|------------------|----------------------------------------|--------------------------------|
| `date`           | 限制為合法日期格式                     | 避免日期格式錯誤               |
| `total_sales`    | 限制為整數且 ≥ 0                       | 避免負值或異常統計              |
| `revenue`        | 限制為浮點數且 ≥ 0                     | 避免金額為負導致分析錯誤        |
| `average_price`  | 限制為浮點數且 ≥ 0                     | 避免資料統計失真                 |

---

* Inventory_Analytics  : 庫存趨勢

| 欄位名稱         | 資料型別 | 唯一 | NOT NULL | 預設值         | 格式/限制                                      | 說明                         |
|------------------|----------|------|----------|----------------|------------------------------------------------|------------------------------|
| `record_id`      | INT UNSIGNED     | Y    | Y        | AUTO_INCREMENT | 正整數                                         | 分析紀錄唯一識別碼           |
| `date`           | DATE     | N    | Y        | 無             | 合法日期格式                                   | 統計日期                     |
| `warehouse_id`   | INT  UNSIGNED    | N    | N        | 無             | 外鍵參照 `Warehouses(warehouse_id)`            | 倉庫 ID                      |
| `product_id`     | INT UNSIGNED     | N    | N        | 無             | 外鍵參照 `Products(product_id)`                | 商品 ID                      |
| `starting_stock` | INT      | N    | Y        | 無             | 限制為整數且 ≥ 0                               | 起始庫存量                   |
| `ending_stock`   | INT      | N    | Y        | 無             | 限制為整數且 ≥ 0                               | 結束庫存量                   |
| `sold_units`     | INT      | N    | Y        | 無             | 限制為整數且 ≥ 0                               | 銷售數量                     |
| `received_units` | INT      | N    | Y        | 無             | 限制為整數且 ≥ 0                               | 補貨數量                     |

| 欄位名稱         |  限制方式                   | 理由說明                     |
|------------------|--------------------------------|------------------------------|
| `date`           | 限制為合法日期格式             | 避免格式錯誤與資料錯亂       |
| `starting_stock` | 限制為整數且 ≥ 0               | 避免負庫存錯誤               |
| `ending_stock`   | 限制為整數且 ≥ 0               | 避免邏輯錯誤                 |
| `sold_units`     | 限制為整數且 ≥ 0               | 確保正確銷售計算             |
| `received_units` | 限制為整數且 ≥ 0               | 確保補貨量正確               |

---

* Order_Conversion_Stats : 訂單轉換率

| 欄位名稱          | 資料型別      | 唯一 | NOT NULL | 預設值         | 格式/限制                          | 說明                            |
|-------------------|---------------|------|----------|----------------|-----------------------------------|---------------------------------|
| `record_id`       | INT   UNSIGNED        | Y    | Y        | AUTO_INCREMENT | 正整數                            | 統計紀錄唯一識別碼              |
| `date`            | DATE          | N    | Y        | 無             | 合法日期格式                      | 統計日期                        |
| `total_visits`    | INT           | N    | Y        | 無             | 整數，應 ≥ 0                      | 當日網站訪問次數                |
| `total_orders`    | INT           | N    | Y        | 無             | 整數，應 ≥ 0                      | 當日訂單數量                    |
| `conversion_rate` | DECIMAL(5,2)  | N    | Y        | 無             | 0~100，保留兩位小數              | 訂單轉換率（例如 4.35 代表 4.35%） |

| 欄位名稱          |  限制方式                         | 理由說明                        |
|-------------------|--------------------------------------|---------------------------------|
| `date`            | 限制為合法日期格式                   | 避免格式錯誤與資料錯亂          |
| `total_visits`    | 限制為整數且 ≥ 0                     | 避免邏輯錯誤                    |
| `total_orders`    | 限制為整數且 ≥ 0                     | 避免異常統計                    |
| `conversion_rate` | 限制為 0~100 的浮點數，保留兩位小數  | 避免無效百分比或除以零錯誤      |

---

* Shipment_Performance : 物流配送表現

| 欄位名稱               | 資料型別     | 唯一 | NOT NULL | 預設值         | 格式/限制                              | 說明                            |
|------------------------|--------------|------|----------|----------------|-----------------------------------------|---------------------------------|
| `record_id`            | INT  UNSIGNED        | Y    | Y        | AUTO_INCREMENT | 正整數                                  | 紀錄唯一識別碼                  |
| `date`                 | DATE         | N    | Y        | 無             | 合法日期格式                            | 統計日期                        |
| `carrier`              | STRING(50)   | N    | Y        | 無             | 最長 50 字， 限制字元類型            | 承運商名稱                      |
| `total_shipments`      | INT          | N    | Y        | 無             | 整數 ≥ 0                                | 當日總出貨數量                  |
| `on_time_deliveries`   | INT          | N    | Y        | 無             | 整數 ≥ 0                                | 準時送達筆數                    |
| `late_deliveries`      | INT          | N    | Y        | 無             | 整數 ≥ 0                                | 延遲送達筆數                    |
| `average_delivery_time`| INT          | N    | Y        | 無             | 整數 ≥ 0，單位為「小時」                | 平均送達時間（小時）            |

| 欄位名稱                |  限制方式                                  | 理由說明                          |
|-------------------------|-----------------------------------------------|-----------------------------------|
| `date`                  | 限制為合法日期格式                            | 避免格式錯誤與資料錯亂            |
| `carrier`               | 限制長度並禁止 `<`, `>`, `'`, `"` 等特殊字元 | 防止 XSS 與資料亂碼               |
| `total_shipments`       | 限制為整數且 ≥ 0                              | 避免負值導致邏輯錯誤              |
| `on_time_deliveries`    | 限制為整數且 ≥ 0                              | 避免統計錯誤                      |
| `late_deliveries`       | 限制為整數且 ≥ 0                              | 避免統計錯誤                      |
| `average_delivery_time` | 限制為整數且 ≥ 0                              | 避免統計錯誤（不可為負時間）      |

---

* Customer_Feedback_Stats : 顧客回饋

| 欄位名稱           | 資料型別      | 唯一 | NOT NULL | 預設值         | 格式/限制                                | 說明                            |
|--------------------|---------------|------|----------|----------------|-------------------------------------------|---------------------------------|
| `record_id`        | INT   UNSIGNED        | Y    | Y        | AUTO_INCREMENT | 正整數                                    | 統計紀錄唯一識別碼              |
| `date`             | DATE          | N    | Y        | 無             | 合法日期格式                              | 統計日期                        |
| `product_id`       | INT   UNSIGNED        | N    | N        | 無             | 外鍵參照 `Products(product_id)`            | 所屬商品 ID                     |
| `total_reviews`    | INT           | N    | Y        | 無             | 整數且 ≥ 0                                | 評論總數                        |
| `average_rating`   | DECIMAL(3,2)  | N    | Y        | 無             | 數值範圍 為 1.00 ~ 5.00                | 平均評分（星數）                |
| `positive_reviews` | INT           | N    | Y        | 無             | 整數且 ≥ 0                                | 好評數量                        |
| `negative_reviews` | INT           | N    | Y        | 無             | 整數且 ≥ 0                                | 差評數量                        |

| 欄位名稱           |  限制方式                              | 理由說明                     |
|--------------------|-------------------------------------------|------------------------------|
| `date`             | 限制為合法日期格式                        | 避免時間欄位錯誤             |
| `total_reviews`    | 限制為整數且 ≥ 0                          | 避免統計錯誤                 |
| `average_rating`   | 限制為浮點數，範圍 為 1.00 至 5.00     | 確保評分合理                 |
| `positive_reviews` | 限制為整數且 ≥ 0                          | 避免負值導致邏輯錯誤         |
| `negative_reviews` | 限制為整數且 ≥ 0                          | 避免負值導致邏輯錯誤         |


## 訂單管理

* orders : 訂單

| 欄位名稱       | 資料型別      | 唯一 | NOT NULL | 預設值                            | 格式/限制                                                              | 說明                       |
|----------------|---------------|------|----------|------------------------------------|------------------------------------------------------------------------|----------------------------|
| `order_id`     | INT     UNSIGNED      | Y    | Y        | AUTO_INCREMENT                     | 正整數                                                                 | 訂單唯一識別碼             |
| `customer_id`  | INT    UNSIGNED       | N    | Y        | 無                                 | 外鍵參照 `users(user_id)`                                               | 購買者 ID                  |
| `order_status` | ENUM          | N    | Y        | 無                                 | 僅允許 `pending`, `shipped`, `delivered`, `cancelled`,`return`                  | 訂單狀態                   |
| `total_amount` | DECIMAL(10,2) | N    | Y        | 無                                 | 必須為正數，兩位小數                                                  | 訂單總金額                 |
| `created_at`   | TIMESTAMP     | N    | N        | CURRENT_TIMESTAMP                  | 系統時間自動填入                                                       | 建立時間                   |
| `updated_at`   | TIMESTAMP     | N    | N        | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 系統時間自動更新                                       | 最後更新時間               |
| `shipping_fee` | DECIMAL(10,2) | N    | N        | 0.00                               | 金額格式，兩位小數                                                     | 運費                       |
| `discount`     | DECIMAL(10,2) | N    | N        | 0.00                               | 金額格式，兩位小數                                                     | 折扣金額                   |
| `payment_id`   | INT   UNSIGNED        | N    | N        | 無                                 | 外鍵參照 `payments(payment_id)`                                        | 對應付款紀錄 ID            |
| `shipping_id`  | INT  UNSIGNED         | N    | N        | 無                                 | 外鍵參照 `shipments(shipment_id)`                                      | 對應物流紀錄 ID            |
| `coupon_id`    | INT   UNSIGNED        | N    | N        | 無                                 | 外鍵參照 `coupons(coupon_id)`                                          | 使用的優惠券 ID            |

| 欄位名稱       |  限制方式                                         | 理由說明                        |
|----------------|------------------------------------------------------|---------------------------------|
| `order_status` | ENUM 限制白名單：'pending', 'shipped', 'delivered', 'cancelled' | 避免錯誤或惡意狀態注入         |
| `total_amount` | 限制為浮點數且 ≥ 0                                   | 避免負值導致邏輯錯誤            |
| `shipping_fee` | 限制為浮點數且 ≥ 0                                   | 防止運費為負                    |
| `discount`     | 限制為浮點數且 ≥ 0 且 ≤ `total_amount`               | 避免錯誤折扣超額                |
| `created_at`   | 僅允許系統填入，不接受外部輸入                       | 防止偽造時間                    |
| `updated_at`   | 僅允許系統自動更新                                   | 避免修改歷史紀錄                |

---

* order_items : 訂單物品

| 欄位名稱        | 資料型別      | 唯一 | NOT NULL | 預設值         | 格式/限制                                      | 說明                          |
|-----------------|---------------|------|----------|----------------|------------------------------------------------|-------------------------------|
| `order_item_id` | INT    UNSIGNED       | Y    | Y        | AUTO_INCREMENT | 正整數                                         | 訂單項目唯一識別碼            |
| `order_id`      | INT   UNSIGNED        | N    | N        | 無             | 外鍵參照 `orders(order_id)`                    | 所屬訂單 ID                    |
| `product_id`    | INT   UNSIGNED        | N    | Y        | 無             | 外鍵參照 `products(product_id)`                | 商品 ID                        |
| `quantity`      | INT           | N    | Y        | 無             | 整數且 ≥ 1                                     | 訂購數量                       |
| `unit_price`    | DECIMAL(10,2) | N    | Y        | 無             | 正數，小數點後 2 位                            | 商品單價                       |
| `subtotal`      | DECIMAL(10,2) | N    | Y        | 計算欄位       | 自動計算：`quantity * unit_price`              | 該商品項目小計                |


| 欄位名稱     |  限制方式                           | 理由說明                      |
|--------------|----------------------------------------|-------------------------------|
| `quantity`   | 限制為整數且 ≥ 1                       | 確保購買數量合理               |
| `unit_price` | 限制為浮點數且 ≥ 0.01                  | 防止免費或錯誤價格             |
| `subtotal`   | 設為運算欄位，不允許手動輸入           | 避免使用者竄改價格             |

---

* payments : 付款方式 

| 欄位名稱         | 資料型別      | 唯一 | NOT NULL | 預設值             | 格式/限制                                                           | 說明                         |
|------------------|---------------|------|----------|---------------------|----------------------------------------------------------------------|------------------------------|
| `payment_id`     | INT  UNSIGNED         | Y    | Y        | AUTO_INCREMENT      | 正整數                                                             | 付款記錄唯一識別碼           |
| `order_id`       | INT  UNSIGNED         | N    | N        | 無                  | 外鍵參照 `Orders(order_id)`                                          | 所屬訂單 ID                  |
| `payment_method` | ENUM          | N    | Y        | 無                  | 僅允許 `credit_card`, `paypal`, `bank_transfer`, `cash_on_delivery` | 付款方式                     |
| `payment_status` | ENUM          | N    | Y        | 無                  | 僅允許 `pending`, `completed`, `failed`                             | 付款狀態                     |
| `amount`         | DECIMAL(10,2) | N    | Y        | 無                  | 金額格式， 限制 ≥ 0                                              | 付款金額                     |
| `payment_date`   | TIMESTAMP     | N    | N        | CURRENT_TIMESTAMP   | 自動填入系統時間                                                    | 付款時間                     |

| 欄位名稱         |  限制方式                                            | 理由說明                     |
|------------------|---------------------------------------------------------|------------------------------|
| `payment_method` | 僅允許 ENUM 白名單值                                    | 避免注入與資料混亂           |
| `payment_status` | 僅允許 ENUM 白名單值                                    | 避免狀態異常或錯誤邏輯       |
| `amount`         | 限制為浮點數且 ≥ 0                                       | 避免負數與異常付款金額       |

---



* Returns_Refunds : 退貨與退款

| 欄位名稱        | 資料型別      | 唯一 | NOT NULL | 預設值             | 格式/限制                                                        | 說明                         |
|-----------------|---------------|------|----------|---------------------|-------------------------------------------------------------------|------------------------------|
| `return_id`     | INT  UNSIGNED         | Y    | Y        | AUTO_INCREMENT      | 正整數                                                          | 退貨/退款記錄唯一識別碼      |
| `order_id`      | INT   UNSIGNED        | N    | N        | 無                  | 外鍵參照 `Orders(order_id)`                                       | 所屬訂單 ID                  |
| `product_id`    | INT  UNSIGNED         | N    | N        | 無                  | 外鍵參照 `Products(product_id)`                                   | 所屬商品 ID                  |
| `reason`        | STRING        | N    | N        | 無                  |  長度限制，並防止特殊符號                                     | 退貨/退款原因文字描述        |
| `status`        | ENUM          | N    | N        | `'requested'`       | 僅允許 `requested`, `approved`, `rejected`, `processed`           | 處理狀態                     |
| `refund_amount` | DECIMAL(10,2) | N    | N        | 無                  |  限制為浮點數且 ≥ 0                                           | 退款金額（可為部分退款）     |
| `created_at`    | TIMESTAMP     | N    | N        | CURRENT_TIMESTAMP   | 系統時間自動填入                                                | 建立時間                     |

| 欄位名稱        |  限制方式                                                | 理由說明                     |
|-----------------|-------------------------------------------------------------|------------------------------|
| `reason`        | 禁止 `<`, `>`, `"`, `'` 等特殊符號， 轉義或濾除         | 避免 XSS 注入與亂碼           |
| `status`        | 僅允許 ENUM 白名單值                                        | 防止資料注入與狀態錯誤        |
| `refund_amount` | 限制為浮點數且 ≥ 0                                          | 避免負值導致錯誤金額處理      |


#　SQL語法涵概念層與View

### `membership_levels` 欄位可視權限表

| 欄位名稱         | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| `level_id`       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `level_name`     |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `required_points`|  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `discount_rate`  |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `created_at`     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| `updated_at`     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 用於管理會員等級與優惠調整設定  
```sql
CREATE VIEW admin_membership_levels_view AS
SELECT *
FROM membership_levels;
```
📌 用途：會員等級管理與稽核

![image](https://github.com/user-attachments/assets/4e12792a-4674-4f20-9f3b-4ab1534b229b)

2. 賣家（Seller）  
> 了解顧客的會員等級與對應優惠  
```sql
CREATE VIEW seller_membership_levels_view AS
SELECT level_id, level_name, required_points, discount_rate
FROM membership_levels;
```
📌 用途：出貨/行銷依據的會員等級分析

![image](https://github.com/user-attachments/assets/bfc273d6-d198-40b6-846c-499dbaf15c6f)


3. 顧客（Customer）  
> 顧客查詢自身等級與升級條件、優惠資訊  
```sql
CREATE VIEW customer_membership_levels_view AS
SELECT level_id, level_name, required_points, discount_rate
FROM membership_levels;
```
📌 用途：顧客等級查詢、升等動機引導

![image](https://github.com/user-attachments/assets/290da991-d8c5-4626-a912-28dd1eaec940)



4. 倉儲人員（Warehouse）  
> 無會員等級存取需求  
📌 用途：不授權存取會員等級資訊

5. 財務人員（Finance）  
> 僅需了解折扣率以計算財務報表  
```sql
CREATE VIEW finance_membership_levels_view AS
SELECT level_name,discount_rate
FROM membership_levels;
```
📌 用途：折扣率報表與銷售預估

![image](https://github.com/user-attachments/assets/c4bd5250-ed7a-468b-8ab5-858e1511511a)


6. 行銷/營運（Marketing）  
> 用於活動規劃與會員推升策略分析  
```sql
CREATE VIEW marketing_membership_levels_view AS
SELECT level_id, level_name, required_points, discount_rate, created_at, updated_at
FROM membership_levels;
```
📌 用途：等級制度設計與會員經營分析

![image](https://github.com/user-attachments/assets/caa263fb-0b1b-47d5-8d26-39644684e4c4)


7. 客服人員（Support）  
> 需要查詢等級名稱與點數門檻，幫助顧客了解升級條件  
```sql
CREATE VIEW support_membership_levels_view AS
SELECT level_id, level_name, required_points
FROM membership_levels;
```
📌 用途：客服說明「您還差 XX 點就升等」等功能

![image](https://github.com/user-attachments/assets/31618129-6fad-4ded-b82e-399a9f10f567)


## users

### `users` 欄位可視權限表

| 欄位名稱             | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|----------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| `user_id`            |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✔    |
| `username`           |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `email`              |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `phone`              |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| `registration_date`  |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `is_active`          |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| `membership_level_id`|  ✔   |   ✘  |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `shipping_address`   |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✘    |
| `billing_address`    |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✘    |

1. 系統管理員（Admin）
> 查看所有使用者完整資訊以進行帳號管理與審核

```sql
CREATE VIEW admin_user_view AS
SELECT *
FROM users;
```
📌 用途：完整帳號管理、稽核與驗證

![image](https://github.com/user-attachments/assets/3d40d66b-1a97-48c6-be4c-4003a5116777)


2. 賣家（Seller）
> 用於查看顧客的聯絡方式與收貨資訊，以處理訂單出貨
```sql
CREATE VIEW seller_user_view AS
SELECT user_id, username, email, phone, is_active, shipping_address
FROM users;
```
📌 用途：顧客出貨資訊、會員等級追蹤

![image](https://github.com/user-attachments/assets/379a5063-45b8-4395-b054-26e25f181611)


3. 顧客（Customer）
> 用於顧客查看個人資料
```sql
CREATE VIEW customer_user_view AS
SELECT username, email, phone, registration_date, membership_level_id, shipping_address, billing_address
FROM users;
```
📌 用途：顧客個資查詢與修改介面

![image](https://github.com/user-attachments/assets/3839a0de-7d0e-4c7d-8f9b-d97c7aa322a6)

4. 倉儲人員（Warehouse）
> 無使用者資訊存取需求
📌 用途：不授權存取使用者資訊

5. 財務人員（Finance）
> 僅查看帳單與收付款聯絡資料
```sql
CREATE VIEW finance_user_view AS
SELECT user_id,username , email, phone,membership_level_id , billing_address
FROM users;
```
📌 用途：帳務聯繫與帳單寄送

![image](https://github.com/user-attachments/assets/88e1fd18-1c68-41c1-8ff9-91a020926ec8)

6. 行銷/營運（Marketing）
> 分析會員活躍度與聯絡管道
```sql
CREATE VIEW marketing_user_view AS
SELECT user_id, username, email, registration_date, membership_level_id
FROM users;
```
📌 用途：會員成長與行銷策略追蹤

![image](https://github.com/user-attachments/assets/4df7f737-daac-4d5e-bdf9-468e9ea96b90)


7. 客服人員（Support）
> 查看顧客聯絡方式與會員等級以協助處理問題
```sql
CREATE VIEW support_user_view AS
SELECT user_id, username, email, phone, registration_date, is_active, membership_level_id
FROM users;
```
📌 用途：協助顧客查詢等級、聯絡方式與註冊狀態

![image](https://github.com/user-attachments/assets/80aa2a52-501d-4ce1-906e-b414a5fdaa5e)

### `sellers` 欄位可視權限表

| 欄位名稱           | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|--------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| `seller_id`        |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |
| `user_id`          |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |
| `store_name`       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `store_description`|  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `bank_account`     |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✘     |    ✘    |
| `created_at`       |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |
| `updated_at`       |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 查看與管理賣家基本資料、帳戶資訊與商店營運狀況  
```sql
CREATE VIEW admin_seller_view AS
SELECT *
FROM sellers;
```
📌 用途：商店與賣家帳號管理、審核與稽核用途

![image](https://github.com/user-attachments/assets/32dd74cb-26b9-48d1-8ed9-a6a241dbabb5)

2. 賣家（Seller）  
> 管理自己商店資訊  
```sql
CREATE VIEW seller_seller_view AS
SELECT seller_id, user_id, store_name, store_description, bank_account, created_at, updated_at
FROM sellers;
```
📌 用途：賣家查詢與維護自己的店家資訊與帳戶

![image](https://github.com/user-attachments/assets/b726b406-e701-4bdb-82c4-9e7e6edd05fe)

3. 顧客（Customer）  
> 僅顯示店家名稱與簡介，用於商城展示  
```sql
CREATE VIEW customer_seller_view AS
SELECT store_name, store_description
FROM sellers;
```
📌 用途：商城店家頁面展示資訊

![image](https://github.com/user-attachments/assets/c2f72627-63b4-4d9a-a2b4-8d3c7f021d66)


4. 倉儲人員（Warehouse）  
> 無賣家資料存取需求  
📌 用途：不授權存取賣家資訊

5. 財務人員（Finance）  
> 用於查帳或轉帳賣家資訊  
```sql
CREATE VIEW finance_seller_view AS
SELECT seller_id, user_id, bank_account, created_at, updated_at
FROM sellers;
```
📌 用途：賣家出帳與匯款用途

![image](https://github.com/user-attachments/assets/24f89e5d-467f-458a-8fcd-f5597b93d142)

6. 行銷/營運（Marketing）  
> 分析店家成長與營運時間分布  
```sql
CREATE VIEW marketing_seller_view AS
SELECT seller_id, user_id, store_name, store_description, created_at, updated_at
FROM sellers;
```
📌 用途：商店行銷活動規劃、營運統計與報告

![image](https://github.com/user-attachments/assets/6286145d-ed66-4b1e-9cb4-7f616204749d)


7. 客服人員（Support）  
> 提供店家基本資訊給顧客查詢或處理爭議  
```sql
CREATE VIEW support_seller_view AS
SELECT store_name, store_description
FROM sellers;
```
📌 用途：客服查詢店家資訊以協助顧客

![image](https://github.com/user-attachments/assets/72f246db-abe6-4163-8e88-49060ca5ee4e)


### `points` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| point_id        |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| user_id         |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| points_earned   |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| transaction_date|  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| description     |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有用戶點數交易記錄
```sql
CREATE VIEW admin_points_view AS
SELECT * FROM points;
```
📌 用途：點數系統全面監控與稽核 

![image](https://github.com/user-attachments/assets/cfe3a182-5f1c-4212-b741-0092deac9b4f)

3. 顧客（Customer）  
> 個人點數獲取與使用記錄
```sql
CREATE VIEW customer_points_view AS
SELECT point_id, user_id, points_earned, transaction_date, description
FROM points
WHERE user_id = CURRENT_USER();
```
📌 用途：點數餘額查詢與兌換追蹤 
* 以user 2 為例
* 
![image](https://github.com/user-attachments/assets/5eda139e-b3ee-4baa-8db3-5e5ec7b93c4d)


5. 財務人員（Finance）  
> 點數發放與使用記錄
```sql
CREATE VIEW finance_points_view AS
SELECT point_id, user_id, points_earned, transaction_date
FROM points;
```
📌 用途：點數資產負債核算 

![image](https://github.com/user-attachments/assets/ca0edec8-f920-4a4f-96f7-687da9972b66)

7. 客服人員（Support）  
> 客戶點數交易記錄
```sql
CREATE VIEW support_points_view AS
SELECT point_id, user_id, points_earned, transaction_date, description
FROM points;
```
📌 用途：點數問題排查與補償處理 

![image](https://github.com/user-attachments/assets/7f45d41d-53c9-4c96-9d38-5ffde2363641)


### `coupons` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| coupon_id       |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| coupon_code     |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✘    |
| discount_amount |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✔     |    ✘    |
| expiry_date     |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✘    |
| usage_limit     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| is_active       |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| coupon_type     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| created_at      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 所有優惠券完整資訊
```sql
CREATE VIEW admin_coupons_view AS
SELECT * FROM coupons;
```
📌 用途：優惠活動全面管理與分析 

![image](https://github.com/user-attachments/assets/14adf1b8-6e79-4df5-893a-bfe080466ca2)


6. 行銷/營運（Marketing）  
> 優惠券活動數據
```sql
CREATE VIEW marketing_coupons_view AS
SELECT coupon_id, coupon_code, discount_amount, expiry_date, 
       usage_limit, is_active, coupon_type, created_at
FROM coupons;
```
📌 用途：促銷活動規劃與效果追蹤 

![image](https://github.com/user-attachments/assets/a1191345-ab71-4702-a94f-983975306db5)


3. 顧客（Customer）  
> 當前有效優惠券列表
```sql
CREATE VIEW customer_coupons_view AS
SELECT coupon_id, coupon_code, discount_amount, expiry_date
FROM coupons
WHERE is_active = TRUE AND (expiry_date IS NULL OR expiry_date >= CURDATE());
```
📌 用途：優惠券查詢與結帳使用 

![image](https://github.com/user-attachments/assets/30876a08-3213-43e6-a259-f212313294bb)


### `messages` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| message_id      |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| sender_id       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| receiver_id     |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| message_content |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| send_time       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| is_read         |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有用戶間通訊記錄
```sql
CREATE VIEW admin_messages_view AS
SELECT * FROM messages;
```
📌 用途：通訊安全監控與爭議處理 

![image](https://github.com/user-attachments/assets/e41873c0-e356-4780-a8a3-497fdd558b9c)


3. 顧客（Customer）  
> 個人收發訊息記錄
```sql
CREATE VIEW customer_messages_view AS
SELECT message_id, sender_id, receiver_id, message_content, send_time, is_read
FROM messages
WHERE sender_id = CURRENT_USER() OR receiver_id = CURRENT_USER();
```
![image](https://github.com/user-attachments/assets/196eabf1-7aa3-4ea1-a1a0-0529a375023d)


📌 用途：買賣雙方溝通歷史查詢 

7. 客服人員（Support）  
> 訊息元數據查詢
```sql
CREATE VIEW support_messages_view AS
SELECT message_id, sender_id, receiver_id, send_time, is_read
FROM messages;
```
📌 用途：糾紛調解與通訊異常處理 

![image](https://github.com/user-attachments/assets/aeab6f20-83bd-4dea-b462-abd05dad0bcb)


### `notifications` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| notification_id |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| user_id         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| notification_type| ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| subject         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| message         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| sent_at         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| is_read         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| related_entity  |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| related_entity_id| ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有系統通知記錄
```sql
CREATE VIEW admin_notifications_view AS
SELECT * FROM notifications;
```
📌 用途：通知系統效能監控與分析 

![image](https://github.com/user-attachments/assets/16c77dd9-0aff-4943-9868-bd2220677d4c)


3. 顧客（Customer）  
> 個人系統通知列表
```sql
CREATE OR REPLACE VIEW customer_notifications_view AS
SELECT notification_id, notification_type, subject, 
       message, sent_at, is_read, related_entity, related_entity_id,user_id
FROM notifications
WHERE user_id = CURRENT_USER();
```
![image](https://github.com/user-attachments/assets/177bc196-b2b5-4ac5-a319-73df0b162a15)


📌 用途：訂單狀態更新與活動通知查閱 

6. 行銷/營運（Marketing）  
> 通知發送統計數據
```sql
CREATE VIEW marketing_notifications_view AS
SELECT notification_id, user_id, notification_type, 
       sent_at, related_entity
FROM notifications;
```
📌 用途：用戶觸達效果分析與優化 

![image](https://github.com/user-attachments/assets/815ed792-70e4-4afd-8522-9b849aecd0ec)

7. 客服人員（Support）  
> 客戶通知記錄
```sql
CREATE VIEW support_notifications_view AS
SELECT notification_id, user_id, notification_type, 
       subject, sent_at, is_read
FROM notifications;
```
📌 用途：通知補發與客戶查詢處理 

![image](https://github.com/user-attachments/assets/e439822a-2280-471d-be60-34063c85834e)


## 倉庫管理

### `warehouses` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| warehouse_id    |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| warehouse_name  |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| location       |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| capacity       |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| manager_id     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| contact_info   |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| created_at     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
>完整倉庫管理資訊
```sql
CREATE VIEW admin_warehouses_view AS
SELECT * FROM warehouses;
```
📌 用途：系統後台進行倉庫全面管理與稽核

![image](https://github.com/user-attachments/assets/63a3d32a-e350-401e-a0fc-a9198c6ec383)


2. 倉儲人員（Warehouse）
>倉庫基本運營資訊
```spl
CREATE VIEW warehouse_warehouses_view AS
SELECT * FROM warehouses;
```
📌 用途：日常倉庫管理與維護作業

![image](https://github.com/user-attachments/assets/8ef68b4b-e4eb-4535-9cea-d6f68f38af13)


### `inventory` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| inventory_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| warehouse_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| stock_quantity  |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| reorder_level   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| last_updated    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
>完整庫存狀態監控
```sql
CREATE VIEW admin_inventory_view AS
SELECT * FROM inventory;
```
![image](https://github.com/user-attachments/assets/2875d759-2e47-420a-9773-7203ddfd8f7b)

📌 用途：全局庫存分析與異常監測

2. 賣家（Seller）
>賣家相關商品庫存狀態
```sql
CREATE VIEW seller_inventory_view AS
SELECT inventory_id, warehouse_id, product_id, stock_quantity, reorder_level, last_updated
FROM inventory;
```

![image](https://github.com/user-attachments/assets/3dcb4165-5c82-413c-974d-9cd74fa82bef)


📌 用途：商品備貨與補貨決策依據

3. 倉儲人員（Warehouse）
>實時庫存操作介面
```sql
CREATE VIEW warehouse_inventory_view AS
SELECT * FROM inventory;
```

📌 用途：每日盤點與庫位管理

![image](https://github.com/user-attachments/assets/aafec53c-bf5a-46d0-9cd3-daa6404bf09d)


### `suppliers` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| supplier_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| supplier_name   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| contact_info    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| country         |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| rating          |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| created_at      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
供應商完整檔案
```sql
CREATE VIEW admin_suppliers_view AS
SELECT * FROM suppliers;
```
📌 用途：供應鏈全生命周期管理

![image](https://github.com/user-attachments/assets/ada18f49-03e8-48f8-8641-1420d56660bc)


2. 賣家（Seller）
>合作供應商基本資料
```sql
CREATE VIEW seller_suppliers_view AS
SELECT supplier_id, supplier_name, contact_info, country, rating, created_at
FROM suppliers;
```
![image](https://github.com/user-attachments/assets/bf8c5a78-8d7e-4fcd-81f0-e990cab005b9)


📌 用途：採購決策與供應商評估

3. 倉儲人員（Warehouse）
>物流聯絡所需資訊
```sql
CREATE VIEW warehouse_suppliers_view AS
SELECT supplier_id, supplier_name, contact_info, country, rating
FROM suppliers;
```

![image](https://github.com/user-attachments/assets/d583817a-80a1-4ad9-bf32-231c2f2c518f)


📌 用途：到貨異常時緊急聯絡

### `inbound_Shipments` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| inbound_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| supplier_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| warehouse_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| quantity        |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| arrival_date    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| status          |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
>完整入庫流水記錄
```sql
CREATE VIEW admin_inbound_view AS
SELECT * FROM inbound_shipments;
```
📌 用途：入庫流程審計與分析

![image](https://github.com/user-attachments/assets/cc24f134-b332-4c2c-88b5-2d8f5e79c672)


2. 賣家（Seller）  
> 商品採購入庫狀態
```sql
CREATE VIEW seller_inbound_view AS
SELECT inbound_id, supplier_id, warehouse_id, product_id, quantity, arrival_date, status
FROM inbound_shipments;
```

📌 用途：追蹤採購單到貨情況

![image](https://github.com/user-attachments/assets/c4392cf2-e53b-41b4-bf7a-748d4ebbbc45)


3. 倉儲人員（Warehouse）  
> 入庫作業明細
```sql
CREATE VIEW warehouse_inbound_view AS
SELECT * FROM inbound_shipments;
```
![image](https://github.com/user-attachments/assets/66a8362e-c79f-4d80-b818-aea5e2ddf6b7)


📌 用途：實際收貨與驗收入庫

### `outbound_Shipments` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| outbound_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| order_id        |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| warehouse_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| quantity        |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| dispatch_date   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| status          |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）  
>完整出庫歷史記錄
```sql
CREATE VIEW admin_outbound_view AS
SELECT * FROM outbound_shipments;
```

![image](https://github.com/user-attachments/assets/9a64db8b-bf15-4120-a3c0-e93a428480f7)


📌 用途：出庫異常分析與追溯

2. 賣家（Seller）  
>商品出庫狀態監控
```sql
CREATE VIEW seller_outbound_view AS
SELECT outbound_id, order_id, warehouse_id, product_id, quantity, dispatch_date, status
FROM outbound_shipments;
```

![image](https://github.com/user-attachments/assets/d3505bd4-9f1f-4d3e-aa2e-d767246125fd)


📌 用途：訂單履約進度追蹤

3. 倉儲人員（Warehouse）  
>出庫作業單據
```sql
CREATE VIEW warehouse_outbound_view AS
SELECT * FROM outbound_shipments;
```
📌 用途：實際揀貨與出庫作業

![image](https://github.com/user-attachments/assets/d1bfc204-3721-49e8-b7b2-324c5b7db3fe)


4. 客服人員（Support）  
>客戶出庫查詢介面
```sql
CREATE VIEW support_outbound_view AS
SELECT outbound_id, order_id, product_id, quantity, dispatch_date, status
FROM outbound_shipments;
```

📌 用途：解答客戶物流進度問題

![image](https://github.com/user-attachments/assets/4cd9a1ea-a64c-4532-9f9b-94c605f21abe)




📌 用途：退換貨處理、訂單爭議解決 

### `shipments` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| shipment_id         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| order_id           |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| tracking_number    |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| shipment_status    |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| estimated_delivery |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| actual_delivery    |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| carrier            |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| shipping_cost      |  ✔   |   ✔   |    ✘     |     ✔     |    ✔    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有物流配送記錄
```sql
CREATE VIEW admin_shipments_view AS
SELECT * FROM shipments;
```

📌 用途：物流效能分析、運費結算 

![image](https://github.com/user-attachments/assets/9c8f3e14-76f9-408a-9679-c61045ee7dd4)


2. 賣家（Seller）  
> 賣家相關物流資訊
```sql
CREATE VIEW seller_shipments_view AS
SELECT shipment_id, order_id, tracking_number, shipment_status, estimated_delivery, actual_delivery, carrier
FROM shipments;
```

📌 用途：物流進度追蹤、客戶通知 

![image](https://github.com/user-attachments/assets/69b14d6c-c60a-42ec-be04-3f0a84a320ba)


3. 顧客（Customer）  
> 個人訂單物流狀態
```sql
CREATE VIEW customer_shipments_view AS
SELECT s.shipment_id, s.order_id, s.tracking_number, s.shipment_status, 
       s.estimated_delivery, s.actual_delivery, s.carrier,o.customer_name
FROM shipments s
JOIN orders o ON s.order_id = o.order_id
WHERE o.customer_id = CURRENT_USER();
```
![image](https://github.com/user-attachments/assets/7127aced-1a17-4c9c-83a7-9b569652f634)


📌 用途：包裹追蹤、收貨準備 

4. 倉儲人員（Warehouse）  
> 物流出庫關聯資訊
```sql
CREATE VIEW warehouse_shipments_view AS
SELECT shipment_id, order_id, tracking_number, shipment_status, carrier
FROM shipments;
```

![image](https://github.com/user-attachments/assets/2e0a2577-f028-4315-ad15-b8d8cb1d2076)


📌 用途：物流交接、運單打印 

5. 客服人員（Support）  
> 客戶物流查詢介面
```sql
CREATE VIEW support_shipments_view AS
SELECT shipment_id, order_id, tracking_number, shipment_status, 
       estimated_delivery, actual_delivery, carrier
FROM shipments;
```

![image](https://github.com/user-attachments/assets/5c56b118-b637-4390-8126-fe520bd49900)


📌 用途：物流異常處理、客戶諮詢 

### `warehouse_Transfers` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| transfer_id         |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| from_warehouse_id   |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| to_warehouse_id     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id          |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| quantity            |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| transfer_status     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| transfer_date       |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）  
> 所有倉庫調撥記錄
```sql
CREATE VIEW admin_transfers_view AS
SELECT * FROM warehouse_transfers;
```

![image](https://github.com/user-attachments/assets/a60b5e04-82e5-4519-9d41-505ff9991778)


📌 用途：庫存調度分析、倉庫效能評估 

2. 倉儲人員（Warehouse）  
> 倉庫間調撥作業單
```sql
CREATE VIEW warehouse_transfers_view AS
SELECT * FROM warehouse_transfers;
```
![image](https://github.com/user-attachments/assets/d21ff1bf-7d0e-4e2f-b3e8-ef64e8a2a50b)



## 數據分析

### `sales_Analysis` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id       |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| date           |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| product_id     |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| category_id    |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| total_sales    |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| revenue        |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| average_price  |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 完整銷售分析數據
```sql
CREATE VIEW admin_sales_analysis_view AS
SELECT * FROM sales_analysis;
```
📌 用途：業務決策支持、績效評估 

![image](https://github.com/user-attachments/assets/8408af8d-4791-413b-995b-e18e1f56db94)

2. 賣家（Seller）  
> 賣家銷售績效數據
```sql
CREATE VIEW seller_sales_analysis_view AS
SELECT record_id, date, product_id, category_id, total_sales, revenue, average_price
FROM sales_analysis;
```
📌 用途：銷售策略調整、商品優化 

![image](https://github.com/user-attachments/assets/c74fd2b2-07b9-44dc-900a-3f6344e11ce1)


3. 行銷/營運（Marketing）  
> 銷售趨勢分析數據
```sql
CREATE VIEW marketing_sales_analysis_view AS
SELECT * FROM sales_analysis;
```
📌 用途：促銷活動規劃、市場定位 

![image](https://github.com/user-attachments/assets/db4c3172-8998-4877-98c1-bf4f8a84d722)


### `inventory_Analytics` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id       |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| date           |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| warehouse_id   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| product_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| starting_stock |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| ending_stock   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| sold_units     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| received_units |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 完整庫存流動數據
```sql
CREATE VIEW admin_inventory_analytics_view AS
SELECT * FROM inventory_analytics;
```
📌 用途：庫存周轉分析、採購策略 

![image](https://github.com/user-attachments/assets/facb037c-75fb-41c0-a05b-795e0a42c67a)


2. 賣家（Seller）  
> 商品庫存流動趨勢
```sql
CREATE VIEW seller_inventory_analytics_view AS
SELECT record_id, date, warehouse_id, product_id, starting_stock, ending_stock, sold_units, received_units
FROM inventory_analytics;
```
📌 用途：庫存健康度監測、補貨預測 

![image](https://github.com/user-attachments/assets/2742b941-da33-4a08-b80b-af37a64e82de)


3. 倉儲人員（Warehouse）  
> 庫存操作效能數據
```sql
CREATE VIEW warehouse_inventory_analytics_view AS
SELECT * FROM inventory_analytics;
```
📌 用途：倉儲效率優化、作業排程 

![image](https://github.com/user-attachments/assets/7740ed91-3898-4626-bcfa-b6540af9eb84)


4. 行銷/營運（Marketing）  
> 商品流動關聯數據
```sql
CREATE VIEW marketing_inventory_analytics_view AS
SELECT record_id, date, warehouse_id, product_id, sold_units, received_units
FROM inventory_analytics;
```
📌 用途：促銷商品選擇、清倉規劃 

![image](https://github.com/user-attachments/assets/28ed8a22-955b-42d1-96b1-64cb90d4f507)


### `order_Conversion_Stats` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id       |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| date           |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| total_visits   |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| total_orders   |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| conversion_rate|  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 完整轉換訂單數據
```sql
CREATE VIEW admin_conversion_stats_view AS
SELECT * FROM order_conversion_stats;
```
📌 用途：網站效能評估、業務健康度 

![image](https://github.com/user-attachments/assets/e1469d50-7d38-46ca-aeca-517bced1c074)


2. 行銷/營運（Marketing）  
> 訂單轉換率趨勢
```sql
CREATE VIEW marketing_conversion_stats_view AS
SELECT * FROM order_conversion_stats;
```
📌 用途：廣告投放優化、用戶體驗改進 

![image](https://github.com/user-attachments/assets/f503882d-e320-4a27-9843-bb3995987996)


### `shipment_Performance` 欄位可視權限表
| 欄位                    | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-------------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id               |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| date                   |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| carrier                |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| total_shipments        |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| on_time_deliveries     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| late_deliveries        |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| average_delivery_time  |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 物流全維度效能數據
```sql
CREATE VIEW admin_shipment_performance_view AS
SELECT * FROM shipment_performance;
```
📌 用途：物流商評估、配送策略 

![image](https://github.com/user-attachments/assets/f90366a4-5fb6-415a-a122-6e6fd997b91c)


2. 倉儲人員（Warehouse）  
> 物流操作效能指標
```sql
CREATE VIEW warehouse_shipment_performance_view AS
SELECT record_id, date, carrier, total_shipments, on_time_deliveries, late_deliveries, average_delivery_time
FROM shipment_performance;
```
📌 用途：出庫流程優化、物流商協調 

![image](https://github.com/user-attachments/assets/fd470bf4-79e7-49bf-8000-9bfe889a3fd3)


3. 行銷/營運（Marketing）  
> 客戶配送體驗數據
```sql
CREATE VIEW marketing_shipment_performance_view AS
SELECT record_id, date, carrier, total_shipments, on_time_deliveries, late_deliveries
FROM shipment_performance;
```
📌 用途：服務承諾設計、客戶溝通 

![image](https://github.com/user-attachments/assets/41b7d5f9-e3cf-454e-ba2f-2a711d7924e2)


### `customer_Feedback_Stats` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id           |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| date               |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| product_id         |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| total_reviews      |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| average_rating     |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| positive_reviews   |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| negative_reviews   |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 完整客戶反饋數據
```sql
CREATE VIEW admin_feedback_stats_view AS
SELECT * FROM customer_feedback_stats;
```

📌 用途：服務品質監控、全面改進 

![image](https://github.com/user-attachments/assets/13ff8b18-63fd-4401-b821-a9c16508871c)

2. 賣家（Seller）  
> 商品評價統計數據
```sql
CREATE VIEW seller_feedback_stats_view AS
SELECT record_id, date, product_id, total_reviews, average_rating, positive_reviews, negative_reviews
FROM customer_feedback_stats;
```
📌 用途：商品改進、評價管理 

![image](https://github.com/user-attachments/assets/1a70ea4f-3b3f-4948-a781-95940a61cfba)


3. 行銷/營運（Marketing）  
> 客戶體驗分析數據
```sql
CREATE VIEW marketing_feedback_stats_view AS
SELECT * FROM customer_feedback_stats;
```
📌 用途：品牌形象管理、忠誠度計劃 

![image](https://github.com/user-attachments/assets/af9b3824-b436-44f5-afae-a82368a1236f)


4. 客服人員（Support）  
> 客戶服務相關反饋
```sql
CREATE VIEW support_feedback_stats_view AS
SELECT record_id, date, product_id, total_reviews, average_rating
FROM customer_feedback_stats;
```
📌 用途：服務品質提升、客訴預防 

![image](https://github.com/user-attachments/assets/fa43e874-1506-4a79-97a3-58f31220e63b)


## 商品管理 & 驗證伺服器

### `products` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| product_id          |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| product_name        |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| sku                 |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✔    |
| brand               |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| model               |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| description         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| category_id         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| variant_type        |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| price               |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✔     |    ✔    |
| promotional_price   |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✔     |    ✔    |
| promotion_start_date|  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| promotion_end_date  |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| seller_id           |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| shipping_weight     |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✘    |
| image_url           |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| barcode             |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| reviews_count       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| favorites_count     |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| date_added          |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| last_updated        |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有產品完整資訊
```sql
CREATE VIEW admin_products_view AS
SELECT * FROM products;
```
📌 用途：產品全生命周期管理與審計 

![image](https://github.com/user-attachments/assets/708144da-a076-4eb1-aba1-60cc92d3ab5d)


2. 賣家（Seller）  
> 賣家自有產品管理介面
```sql
CREATE VIEW seller_products_view AS
SELECT product_id, product_name, sku, brand, model, description, 
       category_id, variant_type, price, promotional_price, 
       promotion_start_date, promotion_end_date, shipping_weight,
       image_url, barcode, reviews_count, favorites_count,
       date_added, last_updated,seller_id
FROM products
WHERE seller_id = CURRENT_USER_ID();
```
📌 用途：商品上架、價格調整與庫存管理 

![image](https://github.com/user-attachments/assets/aea14a8e-7a00-4048-891e-25275bde20fb)


3. 顧客（Customer）  
> 顧客可見產品資訊
```sql
CREATE VIEW customer_products_view AS
SELECT product_id, product_name, brand, model, description,
       category_id, variant_type, price, promotional_price,
       promotion_start_date, promotion_end_date, image_url,
       reviews_count, favorites_count
FROM products
WHERE (promotion_end_date IS NULL OR promotion_end_date >= NOW());
```
📌 用途：商品瀏覽與購買決策 

![image](https://github.com/user-attachments/assets/7fa0709f-19c5-46cb-b942-46a7d32c7ad2)


4. 倉儲人員（Warehouse）  
> 產品物流相關資訊
```sql
CREATE VIEW warehouse_products_view AS
SELECT product_id, product_name, sku, shipping_weight, 
       barcode, last_updated
FROM products;
```
📌 用途：揀貨、包裝與庫存管理 

![image](https://github.com/user-attachments/assets/a914e5b9-5700-4890-a181-5bf07808118f)


5. 行銷/營運（Marketing）  
> 產品銷售分析數據
```sql
CREATE VIEW marketing_products_view AS
SELECT product_id, product_name, brand, category_id,
       price, promotional_price, reviews_count,
       favorites_count, date_added
FROM products;
```
📌 用途：市場定位與促銷策略制定 

![image](https://github.com/user-attachments/assets/f275e020-2d34-4343-a93f-2be27447b5f7)


6. 客服人員（Support）  
> 產品基本查詢資訊
```sql
CREATE VIEW support_products_view AS
SELECT product_id, product_name, brand, model,
       category_id, price, image_url, seller_id
FROM products;
```
📌 用途：客戶諮詢與爭議處理 

![image](https://github.com/user-attachments/assets/231b08c3-d5e6-4192-8bb0-c8a28a82a274)


### `reviews` 欄位可視權限表
| 欄位         | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|--------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| review_id    |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| product_id   |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| user_id      |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| rating       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| comment      |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| created_at   |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有產品評論記錄
```sql
CREATE VIEW admin_reviews_view AS
SELECT * FROM reviews;
```
📌 用途：評論內容審核與管理 

![image](https://github.com/user-attachments/assets/78ac2ec8-463b-4ed4-b45b-e66204b04cd6)


2. 賣家（Seller）  
> 賣家產品相關評論
```sql
CREATE VIEW seller_reviews_view AS
SELECT r.review_id, r.product_id, r.rating, r.comment, r.created_at , p.seller_id
FROM reviews r
JOIN products p ON r.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID();
```
📌 用途：產品改進與客戶反饋分析 

![image](https://github.com/user-attachments/assets/700dd17b-7e90-4db0-a2a6-bf982bea7ed8)


3. 顧客（Customer）  
> 所有公開產品評論
```sql
CREATE VIEW customer_reviews_view AS
SELECT review_id, product_id, rating, comment, created_at
FROM reviews;
```
📌 用途：購買決策參考 

![image](https://github.com/user-attachments/assets/228a5ae3-0e17-42a4-9797-6f5cb12b08cb)


4. 行銷/營運（Marketing）  
> 評論統計分析數據
```sql
CREATE VIEW marketing_reviews_view AS
SELECT review_id, product_id, rating, created_at
FROM reviews;
```
📌 用途：產品滿意度評估 

![image](https://github.com/user-attachments/assets/a807d46e-9151-4067-a924-d8a1e200efc1)


5. 客服人員（Support）  
> 評論完整資訊
```sql
CREATE VIEW support_reviews_view AS
SELECT review_id, product_id, user_id, rating, 
       comment, created_at
FROM reviews;
```
📌 用途：不當評論處理與客戶溝通 

![image](https://github.com/user-attachments/assets/dcfd0230-cdf4-4f15-97e5-322f49e68db2)


### `categories ` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| category_id         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| category_name       |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| category_description|  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有產品分類資訊
```sql
CREATE VIEW admin_categories_view AS
SELECT * FROM categories;
```
📌 用途：分類體系管理與調整 

![image](https://github.com/user-attachments/assets/9f718738-4fcc-46c3-83ba-911dd4d7c2aa)


2. 賣家（Seller）  
> 產品分類結構
```sql
CREATE VIEW seller_categories_view AS
SELECT category_id, category_name, category_description
FROM categories;
```
📌 用途：商品上架分類選擇 

![image](https://github.com/user-attachments/assets/b8775647-ff4d-4582-9cfc-f8c10d54d7b0)


3. 顧客（Customer）  
> 顧客可見分類資訊
```sql
CREATE VIEW customer_categories_view AS
SELECT category_description, category_name
FROM categories;
```
📌 用途：商品分類瀏覽 

![image](https://github.com/user-attachments/assets/b744823e-deee-486e-beb3-fe59638670f4)

4. 行銷/營運（Marketing）  
> 分類完整數據
```sql
CREATE VIEW marketing_categories_view AS
SELECT category_id, category_name, category_description
FROM categories;
```
📌 用途：分類銷售分析與促銷規劃 

![image](https://github.com/user-attachments/assets/d47347e1-3fd1-4a0e-98d9-f7490f9f0513)


### `login_logs ` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| log_id          |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| user_id         |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| email           |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| login_time      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| ip_address      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| user_agent      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| success         |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| failure_reason  |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）  
> 所有用戶登入記錄
```sql
CREATE VIEW admin_login_logs_view AS
SELECT * FROM login_logs;
```
📌 用途：安全審計與異常登入監控 

![image](https://github.com/user-attachments/assets/c700ccd5-1dc7-44e9-8f2b-eb451e75e2ab)

2. 客服人員（Support）  
> 用戶登入狀態查詢
```sql
CREATE VIEW support_login_logs_view AS
SELECT log_id, user_id, login_time, success
FROM login_logs;
```
📌 用途：帳號問題排查 

![image](https://github.com/user-attachments/assets/a7569678-1bbd-44a4-8837-c08a497396df)


### `users ` 欄位可視權限表
| 欄位                  | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| user_id               |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| email                 |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| password_hash         |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| account_enable        |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| created_at            |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| failed_login_attempts |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| is_verified           |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| updated_at            |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有用戶完整資料
```sql
CREATE VIEW admin_users_view AS
SELECT * FROM users;
```
📌 用途：帳號全權限管理 

![image](https://github.com/user-attachments/assets/a06e5dae-696e-4039-9565-b50ccb7e76b2)


2. 客服人員（Support）  
> 用戶基本服務資訊
```sql
CREATE VIEW support_users_view AS
SELECT user_id, email, account_enable, 
       created_at, is_verified
FROM users;
```
📌 用途：帳號問題排查與處理 

![image](https://github.com/user-attachments/assets/585d0a98-6378-40c0-ae8c-9a4c3d0b1109)


## 訂單管理

### `orders` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| order_id        |  ✔   |   ✔   |    ✔     |    ✔     |    ✔    |     ✘     |    ✔    |
| customer_id     |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| order_status    |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| total_amount    |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| created_at      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| updated_at      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| shipping_fee    |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| discount        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_id      |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| shipping_id     |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| coupon_id       |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有訂單完整資訊
```sql
CREATE VIEW admin_orders_view AS
SELECT * FROM orders;
```
📌 用途：訂單全生命周期管理與審計 

![image](https://github.com/user-attachments/assets/ab79d1f0-c2c2-46d9-9b6a-918e639175f9)


2. 賣家（Seller）  
> 賣家相關訂單資訊
```sql
CREATE  VIEW seller_orders_view AS
SELECT o.order_id, o.customer_id, o.order_status, 
       o.total_amount, o.created_at, o.updated_at,
       o.shipping_fee, o.discount, o.coupon_id,p.seller_id
FROM orders o
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID()
GROUP BY o.order_id;
```
📌 用途：訂單處理與出貨管理 

![image](https://github.com/user-attachments/assets/591e06d8-7c16-4b5a-9d48-d3fc67b7b8c9)


3. 顧客（Customer）  
> 顧客個人訂單記錄
```sql
CREATE VIEW customer_orders_view AS
SELECT order_id, order_status, total_amount, 
       created_at, updated_at, shipping_fee,
       discount, coupon_id , customer_id
FROM orders
WHERE customer_id = CURRENT_USER_ID();
```
📌 用途：訂單狀態追蹤與歷史查詢 

![image](https://github.com/user-attachments/assets/639b7ca8-234e-4d54-9fd3-ba060a1f6a06)


4. 財務人員（Finance）  
> 訂單財務相關資訊
```sql
CREATE VIEW finance_orders_view AS
SELECT order_id, customer_id, total_amount,
       created_at, shipping_fee, discount,
       payment_id, coupon_id
FROM orders;
```
📌 用途：收入確認與財務報表 

![image](https://github.com/user-attachments/assets/62af9212-efb9-456c-b9c5-9ac84d68fe54)


5. 客服人員（Support）  
> 訂單服務查詢資訊
```sql
CREATE VIEW support_orders_view AS
SELECT order_id, customer_id, order_status,
       total_amount, created_at, updated_at,
       shipping_id, coupon_id
FROM orders;
```
📌 用途：客戶訂單問題處理 

6.倉儲人員(Warehouse)
> 訂單倉儲查詢
```sql
CREATE  VIEW warehouse_orders_view AS
SELECT order_id,order_status,total_amount,shipping_fee,shipping_id
FROM orders;
```

![image](https://github.com/user-attachments/assets/db0c5a4a-cdd0-47ad-8b07-19cbc6614c9e)


### `order_items` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| order_item_id   |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| order_id        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| product_id      |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| quantity        |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✔     |    ✔    |
| unit_price      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| subtotal        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有訂單商品明細
```sql
CREATE VIEW admin_order_items_view AS
SELECT * FROM order_items;
```
📌 用途：訂單商品全面分析 

![image](https://github.com/user-attachments/assets/659600f7-a30a-4861-a156-7b1e29d0e1f2)


2. 賣家（Seller）  
> 賣家商品訂購明細
```sql
CREATE VIEW seller_order_items_view AS
SELECT oi.order_item_id, oi.order_id, oi.product_id,
       oi.quantity, oi.unit_price, oi.subtotal,p.seller_id
FROM order_items oi
JOIN products p ON oi.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID();
```
📌 用途：銷售統計與庫存預測 

![image](https://github.com/user-attachments/assets/a313001f-a44d-4325-bdc8-17ad0aa73cfb)


3. 顧客（Customer）  
> 個人訂單商品明細
```sql
CREATE OR REPLACE VIEW customer_order_items_view AS
SELECT oi.order_item_id, oi.order_id, oi.product_id,
       oi.quantity, oi.unit_price, oi.subtotal,o.customer_id
FROM order_items oi
JOIN orders o ON oi.order_id = o.order_id
WHERE o.customer_id = CURRENT_USER_ID();
```
📌 用途：訂單詳情查看與再次購買 

![image](https://github.com/user-attachments/assets/ad2197f3-bbe7-45b3-904d-7b96d617434a)


4. 財務人員（Finance）  
> 訂單商品財務數據
```sql
CREATE VIEW finance_order_items_view AS
SELECT order_item_id, order_id, product_id,
       quantity, unit_price, subtotal
FROM order_items;
```
📌 用途：收入分攤與成本核算

![image](https://github.com/user-attachments/assets/e6de60f6-8357-457d-99a3-62486d4d0caa)


5. 客服人員（Support）  
> 訂單商品查詢資訊
```sql
CREATE VIEW support_order_items_view AS
SELECT order_item_id, order_id, product_id,
       quantity, unit_price, subtotal
FROM order_items;
```
📌 用途：退換貨與訂單爭議處理 

![image](https://github.com/user-attachments/assets/35436ca4-cfcd-44cd-8bf0-6288b138fe43)


### `payments` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| payment_id      |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_method  |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_status  |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| amount          |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_date    |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有付款交易記錄
```sql
CREATE VIEW admin_payments_view AS
SELECT * FROM payments;
```
📌 用途：支付全流程監控與異常處理 

![image](https://github.com/user-attachments/assets/72e89f8a-999c-43d2-abfd-952b2722a0b4)


2. 顧客（Customer）  
> 個人支付記錄
```sql
CREATE OR REPLACE VIEW customer_payments_view AS
SELECT p.payment_id, p.payment_method,
       p.payment_status, p.amount, p.payment_date,o.customer_id,o.order_id
FROM payments p
JOIN orders o ON p.payment_id = o.payment_id
WHERE o.customer_id = CURRENT_USER_ID();
```
📌 用途：支付憑證查詢與退款申請 

![image](https://github.com/user-attachments/assets/43d69954-2361-44d9-9db9-846382be9a0a)


3. 財務人員（Finance）  
> 完整付款財務資料
```sql
CREATE VIEW finance_payments_view AS
SELECT p.payment_id, p.payment_method,
       p.payment_status, p.amount, p.payment_date , o.order_id
FROM payments p
JOIN orders o ON p.payment_id = o.payment_id;
```
📌 用途：賬務處理與銀行對賬 

![image](https://github.com/user-attachments/assets/4190f2d2-d3a3-422f-95e2-52d72ce314e0)


4. 客服人員（Support）  
> 客戶支付查詢介面
```sql
CREATE VIEW support_payments_view AS
SELECT p.payment_id, o.order_id, p.payment_method,
       p.payment_status, p.amount, p.payment_date
FROM payments p
JOIN orders o ON p.payment_id = o.payment_id;
```
📌 用途：支付問題排查與退款處理 

![image](https://github.com/user-attachments/assets/6c3ad93e-0610-429f-8c77-22310738a52b)


### `return_refunds` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| refund_id       |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| order_id        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| product_id      |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| reason          |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| status          |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| refund_amount   |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| created_at      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有退貨退款記錄
```sql
CREATE VIEW admin_return_refunds_view AS
SELECT * FROM return_refunds;
```
📌 用途：退貨率分析與流程優化 

![image](https://github.com/user-attachments/assets/14c4e78a-373c-4435-8508-74c92b88cb8b)


2. 賣家（Seller）  
> 賣家商品退貨申請
```sql
CREATE VIEW seller_return_refunds_view AS
SELECT rr.refund_id, rr.order_id, rr.product_id,
       rr.reason, rr.status, rr.refund_amount, rr.created_at
       ,p.seller_id
FROM return_refunds rr
JOIN products p ON rr.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID();
```
📌 用途：退貨審核與庫存恢復 

![image](https://github.com/user-attachments/assets/aa187ceb-6907-472a-9e5d-8479a67b3fb4)


3. 顧客（Customer）  
> 個人退貨退款記錄
```sql
CREATE VIEW customer_return_refunds_view AS
SELECT rr.refund_id, rr.order_id, rr.product_id,
       rr.reason, rr.status, rr.refund_amount, rr.created_at
       ,o.customer_id
FROM return_refunds rr
JOIN orders o ON rr.order_id = o.order_id
WHERE o.customer_id = CURRENT_USER_ID();
```
📌 用途：退貨進度查詢與追蹤 

![image](https://github.com/user-attachments/assets/115176b6-5c2c-4589-abbc-4bd783cf6d76)


5. 財務人員（Finance）  
> 退款財務資料
```sql
CREATE VIEW finance_return_refunds_view AS
SELECT refund_id, order_id, product_id,
       status, refund_amount, created_at
FROM return_refunds;
```
📌 用途：退款處理與賬務調整 

![image](https://github.com/user-attachments/assets/a69609e7-3ce4-49e2-bb0e-80e17c130ffb)


7. 客服人員（Support）  
> 退貨退款全資訊
```sql
CREATE VIEW support_return_refunds_view AS
SELECT refund_id, order_id, product_id,
       reason, status, refund_amount, created_at
FROM return_refunds;
```
📌 用途：退貨流程處理與客戶溝通 

![image](https://github.com/user-attachments/assets/d0cf33be-8bb0-4950-a28e-0eb3521d82a5)

# View 

### `membership_levels` 欄位可視權限表

| 欄位名稱         | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| `level_id`       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `level_name`     |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `required_points`|  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `discount_rate`  |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `created_at`     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| `updated_at`     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 用於管理會員等級與優惠調整設定  
```sql
CREATE VIEW admin_membership_levels_view AS
SELECT *
FROM membership_levels;
```
📌 用途：會員等級管理與稽核

![image](https://github.com/user-attachments/assets/4e12792a-4674-4f20-9f3b-4ab1534b229b)

2. 賣家（Seller）  
> 了解顧客的會員等級與對應優惠  
```sql
CREATE VIEW seller_membership_levels_view AS
SELECT level_id, level_name, required_points, discount_rate
FROM membership_levels;
```
📌 用途：出貨/行銷依據的會員等級分析

![image](https://github.com/user-attachments/assets/bfc273d6-d198-40b6-846c-499dbaf15c6f)


3. 顧客（Customer）  
> 顧客查詢自身等級與升級條件、優惠資訊  
```sql
CREATE VIEW customer_membership_levels_view AS
SELECT level_id, level_name, required_points, discount_rate
FROM membership_levels;
```
📌 用途：顧客等級查詢、升等動機引導

![image](https://github.com/user-attachments/assets/290da991-d8c5-4626-a912-28dd1eaec940)



4. 倉儲人員（Warehouse）  
> 無會員等級存取需求  
📌 用途：不授權存取會員等級資訊

5. 財務人員（Finance）  
> 僅需了解折扣率以計算財務報表  
```sql
CREATE VIEW finance_membership_levels_view AS
SELECT level_name,discount_rate
FROM membership_levels;
```
📌 用途：折扣率報表與銷售預估

![image](https://github.com/user-attachments/assets/c4bd5250-ed7a-468b-8ab5-858e1511511a)


6. 行銷/營運（Marketing）  
> 用於活動規劃與會員推升策略分析  
```sql
CREATE VIEW marketing_membership_levels_view AS
SELECT level_id, level_name, required_points, discount_rate, created_at, updated_at
FROM membership_levels;
```
📌 用途：等級制度設計與會員經營分析

![image](https://github.com/user-attachments/assets/caa263fb-0b1b-47d5-8d26-39644684e4c4)


7. 客服人員（Support）  
> 需要查詢等級名稱與點數門檻，幫助顧客了解升級條件  
```sql
CREATE VIEW support_membership_levels_view AS
SELECT level_id, level_name, required_points
FROM membership_levels;
```
📌 用途：客服說明「您還差 XX 點就升等」等功能

![image](https://github.com/user-attachments/assets/31618129-6fad-4ded-b82e-399a9f10f567)


## users

### `users` 欄位可視權限表

| 欄位名稱             | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|----------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| `user_id`            |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✔    |
| `username`           |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `email`              |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `phone`              |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| `registration_date`  |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `is_active`          |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| `membership_level_id`|  ✔   |   ✘  |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| `shipping_address`   |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✘    |
| `billing_address`    |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✘    |

1. 系統管理員（Admin）
> 查看所有使用者完整資訊以進行帳號管理與審核

```sql
CREATE VIEW admin_user_view AS
SELECT *
FROM users;
```
📌 用途：完整帳號管理、稽核與驗證

![image](https://github.com/user-attachments/assets/3d40d66b-1a97-48c6-be4c-4003a5116777)


2. 賣家（Seller）
> 用於查看顧客的聯絡方式與收貨資訊，以處理訂單出貨
```sql
CREATE VIEW seller_user_view AS
SELECT user_id, username, email, phone, is_active, shipping_address
FROM users;
```
📌 用途：顧客出貨資訊、會員等級追蹤

![image](https://github.com/user-attachments/assets/379a5063-45b8-4395-b054-26e25f181611)


3. 顧客（Customer）
> 用於顧客查看個人資料
```sql
CREATE VIEW customer_user_view AS
SELECT username, email, phone, registration_date, membership_level_id, shipping_address, billing_address
FROM users;
```
📌 用途：顧客個資查詢與修改介面

![image](https://github.com/user-attachments/assets/3839a0de-7d0e-4c7d-8f9b-d97c7aa322a6)

4. 倉儲人員（Warehouse）
> 無使用者資訊存取需求
📌 用途：不授權存取使用者資訊

5. 財務人員（Finance）
> 僅查看帳單與收付款聯絡資料
```sql
CREATE VIEW finance_user_view AS
SELECT user_id,username , email, phone,membership_level_id , billing_address
FROM users;
```
📌 用途：帳務聯繫與帳單寄送

![image](https://github.com/user-attachments/assets/88e1fd18-1c68-41c1-8ff9-91a020926ec8)

6. 行銷/營運（Marketing）
> 分析會員活躍度與聯絡管道
```sql
CREATE VIEW marketing_user_view AS
SELECT user_id, username, email, registration_date, membership_level_id
FROM users;
```
📌 用途：會員成長與行銷策略追蹤

![image](https://github.com/user-attachments/assets/4df7f737-daac-4d5e-bdf9-468e9ea96b90)


7. 客服人員（Support）
> 查看顧客聯絡方式與會員等級以協助處理問題
```sql
CREATE VIEW support_user_view AS
SELECT user_id, username, email, phone, registration_date, is_active, membership_level_id
FROM users;
```
📌 用途：協助顧客查詢等級、聯絡方式與註冊狀態

![image](https://github.com/user-attachments/assets/80aa2a52-501d-4ce1-906e-b414a5fdaa5e)

### `sellers` 欄位可視權限表

| 欄位名稱           | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|--------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| `seller_id`        |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |
| `user_id`          |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |
| `store_name`       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `store_description`|  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| `bank_account`     |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✘     |    ✘    |
| `created_at`       |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |
| `updated_at`       |  ✔   |   ✔   |    ✘     |     ✘     |    ✔    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 查看與管理賣家基本資料、帳戶資訊與商店營運狀況  
```sql
CREATE VIEW admin_seller_view AS
SELECT *
FROM sellers;
```
📌 用途：商店與賣家帳號管理、審核與稽核用途

![image](https://github.com/user-attachments/assets/32dd74cb-26b9-48d1-8ed9-a6a241dbabb5)

2. 賣家（Seller）  
> 管理自己商店資訊  
```sql
CREATE VIEW seller_seller_view AS
SELECT seller_id, user_id, store_name, store_description, bank_account, created_at, updated_at
FROM sellers;
```
📌 用途：賣家查詢與維護自己的店家資訊與帳戶

![image](https://github.com/user-attachments/assets/b726b406-e701-4bdb-82c4-9e7e6edd05fe)

3. 顧客（Customer）  
> 僅顯示店家名稱與簡介，用於商城展示  
```sql
CREATE VIEW customer_seller_view AS
SELECT store_name, store_description
FROM sellers;
```
📌 用途：商城店家頁面展示資訊

![image](https://github.com/user-attachments/assets/c2f72627-63b4-4d9a-a2b4-8d3c7f021d66)


4. 倉儲人員（Warehouse）  
> 無賣家資料存取需求  
📌 用途：不授權存取賣家資訊

5. 財務人員（Finance）  
> 用於查帳或轉帳賣家資訊  
```sql
CREATE VIEW finance_seller_view AS
SELECT seller_id, user_id, bank_account, created_at, updated_at
FROM sellers;
```
📌 用途：賣家出帳與匯款用途

![image](https://github.com/user-attachments/assets/24f89e5d-467f-458a-8fcd-f5597b93d142)

6. 行銷/營運（Marketing）  
> 分析店家成長與營運時間分布  
```sql
CREATE VIEW marketing_seller_view AS
SELECT seller_id, user_id, store_name, store_description, created_at, updated_at
FROM sellers;
```
📌 用途：商店行銷活動規劃、營運統計與報告

![image](https://github.com/user-attachments/assets/6286145d-ed66-4b1e-9cb4-7f616204749d)


7. 客服人員（Support）  
> 提供店家基本資訊給顧客查詢或處理爭議  
```sql
CREATE VIEW support_seller_view AS
SELECT store_name, store_description
FROM sellers;
```
📌 用途：客服查詢店家資訊以協助顧客

![image](https://github.com/user-attachments/assets/72f246db-abe6-4163-8e88-49060ca5ee4e)


### `points` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| point_id        |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| user_id         |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| points_earned   |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| transaction_date|  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| description     |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有用戶點數交易記錄
```sql
CREATE VIEW admin_points_view AS
SELECT * FROM points;
```
📌 用途：點數系統全面監控與稽核 

![image](https://github.com/user-attachments/assets/cfe3a182-5f1c-4212-b741-0092deac9b4f)

3. 顧客（Customer）  
> 個人點數獲取與使用記錄
```sql
CREATE VIEW customer_points_view AS
SELECT point_id, user_id, points_earned, transaction_date, description
FROM points
WHERE user_id = CURRENT_USER();
```
📌 用途：點數餘額查詢與兌換追蹤 
* 以user 2 為例
* 
![image](https://github.com/user-attachments/assets/5eda139e-b3ee-4baa-8db3-5e5ec7b93c4d)


5. 財務人員（Finance）  
> 點數發放與使用記錄
```sql
CREATE VIEW finance_points_view AS
SELECT point_id, user_id, points_earned, transaction_date
FROM points;
```
📌 用途：點數資產負債核算 

![image](https://github.com/user-attachments/assets/ca0edec8-f920-4a4f-96f7-687da9972b66)

7. 客服人員（Support）  
> 客戶點數交易記錄
```sql
CREATE VIEW support_points_view AS
SELECT point_id, user_id, points_earned, transaction_date, description
FROM points;
```
📌 用途：點數問題排查與補償處理 

![image](https://github.com/user-attachments/assets/7f45d41d-53c9-4c96-9d38-5ffde2363641)


### `coupons` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| coupon_id       |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| coupon_code     |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✘    |
| discount_amount |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✔     |    ✘    |
| expiry_date     |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✘    |
| usage_limit     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| is_active       |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| coupon_type     |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| created_at      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 所有優惠券完整資訊
```sql
CREATE VIEW admin_coupons_view AS
SELECT * FROM coupons;
```
📌 用途：優惠活動全面管理與分析 

![image](https://github.com/user-attachments/assets/14adf1b8-6e79-4df5-893a-bfe080466ca2)


6. 行銷/營運（Marketing）  
> 優惠券活動數據
```sql
CREATE VIEW marketing_coupons_view AS
SELECT coupon_id, coupon_code, discount_amount, expiry_date, 
       usage_limit, is_active, coupon_type, created_at
FROM coupons;
```
📌 用途：促銷活動規劃與效果追蹤 

![image](https://github.com/user-attachments/assets/a1191345-ab71-4702-a94f-983975306db5)


3. 顧客（Customer）  
> 當前有效優惠券列表
```sql
CREATE VIEW customer_coupons_view AS
SELECT coupon_id, coupon_code, discount_amount, expiry_date
FROM coupons
WHERE is_active = TRUE AND (expiry_date IS NULL OR expiry_date >= CURDATE());
```
📌 用途：優惠券查詢與結帳使用 

![image](https://github.com/user-attachments/assets/30876a08-3213-43e6-a259-f212313294bb)


### `messages` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| message_id      |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| sender_id       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| receiver_id     |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| message_content |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| send_time       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| is_read         |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有用戶間通訊記錄
```sql
CREATE VIEW admin_messages_view AS
SELECT * FROM messages;
```
📌 用途：通訊安全監控與爭議處理 

![image](https://github.com/user-attachments/assets/e41873c0-e356-4780-a8a3-497fdd558b9c)


3. 顧客（Customer）  
> 個人收發訊息記錄
```sql
CREATE VIEW customer_messages_view AS
SELECT message_id, sender_id, receiver_id, message_content, send_time, is_read
FROM messages
WHERE sender_id = CURRENT_USER() OR receiver_id = CURRENT_USER();
```
![image](https://github.com/user-attachments/assets/196eabf1-7aa3-4ea1-a1a0-0529a375023d)


📌 用途：買賣雙方溝通歷史查詢 

7. 客服人員（Support）  
> 訊息元數據查詢
```sql
CREATE VIEW support_messages_view AS
SELECT message_id, sender_id, receiver_id, send_time, is_read
FROM messages;
```
📌 用途：糾紛調解與通訊異常處理 

![image](https://github.com/user-attachments/assets/aeab6f20-83bd-4dea-b462-abd05dad0bcb)


### `notifications` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| notification_id |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| user_id         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| notification_type| ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| subject         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| message         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| sent_at         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| is_read         |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| related_entity  |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| related_entity_id| ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有系統通知記錄
```sql
CREATE VIEW admin_notifications_view AS
SELECT * FROM notifications;
```
📌 用途：通知系統效能監控與分析 

![image](https://github.com/user-attachments/assets/16c77dd9-0aff-4943-9868-bd2220677d4c)


3. 顧客（Customer）  
> 個人系統通知列表
```sql
CREATE OR REPLACE VIEW customer_notifications_view AS
SELECT notification_id, notification_type, subject, 
       message, sent_at, is_read, related_entity, related_entity_id,user_id
FROM notifications
WHERE user_id = CURRENT_USER();
```
![image](https://github.com/user-attachments/assets/177bc196-b2b5-4ac5-a319-73df0b162a15)


📌 用途：訂單狀態更新與活動通知查閱 

6. 行銷/營運（Marketing）  
> 通知發送統計數據
```sql
CREATE VIEW marketing_notifications_view AS
SELECT notification_id, user_id, notification_type, 
       sent_at, related_entity
FROM notifications;
```
📌 用途：用戶觸達效果分析與優化 

![image](https://github.com/user-attachments/assets/815ed792-70e4-4afd-8522-9b849aecd0ec)

7. 客服人員（Support）  
> 客戶通知記錄
```sql
CREATE VIEW support_notifications_view AS
SELECT notification_id, user_id, notification_type, 
       subject, sent_at, is_read
FROM notifications;
```
📌 用途：通知補發與客戶查詢處理 

![image](https://github.com/user-attachments/assets/e439822a-2280-471d-be60-34063c85834e)


## 倉庫管理

### `warehouses` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| warehouse_id    |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| warehouse_name  |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| location       |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| capacity       |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| manager_id     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| contact_info   |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| created_at     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
>完整倉庫管理資訊
```sql
CREATE VIEW admin_warehouses_view AS
SELECT * FROM warehouses;
```
📌 用途：系統後台進行倉庫全面管理與稽核

![image](https://github.com/user-attachments/assets/63a3d32a-e350-401e-a0fc-a9198c6ec383)


2. 倉儲人員（Warehouse）
>倉庫基本運營資訊
```spl
CREATE VIEW warehouse_warehouses_view AS
SELECT * FROM warehouses;
```
📌 用途：日常倉庫管理與維護作業

![image](https://github.com/user-attachments/assets/8ef68b4b-e4eb-4535-9cea-d6f68f38af13)


### `inventory` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| inventory_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| warehouse_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| stock_quantity  |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| reorder_level   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| last_updated    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
>完整庫存狀態監控
```sql
CREATE VIEW admin_inventory_view AS
SELECT * FROM inventory;
```
![image](https://github.com/user-attachments/assets/2875d759-2e47-420a-9773-7203ddfd8f7b)

📌 用途：全局庫存分析與異常監測

2. 賣家（Seller）
>賣家相關商品庫存狀態
```sql
CREATE VIEW seller_inventory_view AS
SELECT inventory_id, warehouse_id, product_id, stock_quantity, reorder_level, last_updated
FROM inventory;
```

![image](https://github.com/user-attachments/assets/3dcb4165-5c82-413c-974d-9cd74fa82bef)


📌 用途：商品備貨與補貨決策依據

3. 倉儲人員（Warehouse）
>實時庫存操作介面
```sql
CREATE VIEW warehouse_inventory_view AS
SELECT * FROM inventory;
```

📌 用途：每日盤點與庫位管理

![image](https://github.com/user-attachments/assets/aafec53c-bf5a-46d0-9cd3-daa6404bf09d)


### `suppliers` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| supplier_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| supplier_name   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| contact_info    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| country         |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| rating          |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| created_at      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
供應商完整檔案
```sql
CREATE VIEW admin_suppliers_view AS
SELECT * FROM suppliers;
```
📌 用途：供應鏈全生命周期管理

![image](https://github.com/user-attachments/assets/ada18f49-03e8-48f8-8641-1420d56660bc)


2. 賣家（Seller）
>合作供應商基本資料
```sql
CREATE VIEW seller_suppliers_view AS
SELECT supplier_id, supplier_name, contact_info, country, rating, created_at
FROM suppliers;
```
![image](https://github.com/user-attachments/assets/bf8c5a78-8d7e-4fcd-81f0-e990cab005b9)


📌 用途：採購決策與供應商評估

3. 倉儲人員（Warehouse）
>物流聯絡所需資訊
```sql
CREATE VIEW warehouse_suppliers_view AS
SELECT supplier_id, supplier_name, contact_info, country, rating
FROM suppliers;
```

![image](https://github.com/user-attachments/assets/d583817a-80a1-4ad9-bf32-231c2f2c518f)


📌 用途：到貨異常時緊急聯絡

### `inbound_Shipments` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| inbound_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| supplier_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| warehouse_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| quantity        |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| arrival_date    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| status          |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）
>完整入庫流水記錄
```sql
CREATE VIEW admin_inbound_view AS
SELECT * FROM inbound_shipments;
```
📌 用途：入庫流程審計與分析

![image](https://github.com/user-attachments/assets/cc24f134-b332-4c2c-88b5-2d8f5e79c672)


2. 賣家（Seller）  
> 商品採購入庫狀態
```sql
CREATE VIEW seller_inbound_view AS
SELECT inbound_id, supplier_id, warehouse_id, product_id, quantity, arrival_date, status
FROM inbound_shipments;
```

📌 用途：追蹤採購單到貨情況

![image](https://github.com/user-attachments/assets/c4392cf2-e53b-41b4-bf7a-748d4ebbbc45)


3. 倉儲人員（Warehouse）  
> 入庫作業明細
```sql
CREATE VIEW warehouse_inbound_view AS
SELECT * FROM inbound_shipments;
```
![image](https://github.com/user-attachments/assets/66a8362e-c79f-4d80-b818-aea5e2ddf6b7)


📌 用途：實際收貨與驗收入庫

### `outbound_Shipments` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| outbound_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| order_id        |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| warehouse_id    |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id      |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| quantity        |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| dispatch_date   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| status          |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）  
>完整出庫歷史記錄
```sql
CREATE VIEW admin_outbound_view AS
SELECT * FROM outbound_shipments;
```

![image](https://github.com/user-attachments/assets/9a64db8b-bf15-4120-a3c0-e93a428480f7)


📌 用途：出庫異常分析與追溯

2. 賣家（Seller）  
>商品出庫狀態監控
```sql
CREATE VIEW seller_outbound_view AS
SELECT outbound_id, order_id, warehouse_id, product_id, quantity, dispatch_date, status
FROM outbound_shipments;
```

![image](https://github.com/user-attachments/assets/d3505bd4-9f1f-4d3e-aa2e-d767246125fd)


📌 用途：訂單履約進度追蹤

3. 倉儲人員（Warehouse）  
>出庫作業單據
```sql
CREATE VIEW warehouse_outbound_view AS
SELECT * FROM outbound_shipments;
```
📌 用途：實際揀貨與出庫作業

![image](https://github.com/user-attachments/assets/d1bfc204-3721-49e8-b7b2-324c5b7db3fe)


4. 客服人員（Support）  
>客戶出庫查詢介面
```sql
CREATE VIEW support_outbound_view AS
SELECT outbound_id, order_id, product_id, quantity, dispatch_date, status
FROM outbound_shipments;
```

📌 用途：解答客戶物流進度問題

![image](https://github.com/user-attachments/assets/4cd9a1ea-a64c-4532-9f9b-94c605f21abe)




📌 用途：退換貨處理、訂單爭議解決 

### `shipments` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| shipment_id         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| order_id           |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| tracking_number    |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| shipment_status    |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| estimated_delivery |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| actual_delivery    |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| carrier            |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| shipping_cost      |  ✔   |   ✔   |    ✘     |     ✔     |    ✔    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有物流配送記錄
```sql
CREATE VIEW admin_shipments_view AS
SELECT * FROM shipments;
```

📌 用途：物流效能分析、運費結算 

![image](https://github.com/user-attachments/assets/9c8f3e14-76f9-408a-9679-c61045ee7dd4)


2. 賣家（Seller）  
> 賣家相關物流資訊
```sql
CREATE VIEW seller_shipments_view AS
SELECT shipment_id, order_id, tracking_number, shipment_status, estimated_delivery, actual_delivery, carrier
FROM shipments;
```

📌 用途：物流進度追蹤、客戶通知 

![image](https://github.com/user-attachments/assets/69b14d6c-c60a-42ec-be04-3f0a84a320ba)


3. 顧客（Customer）  
> 個人訂單物流狀態
```sql
CREATE VIEW customer_shipments_view AS
SELECT s.shipment_id, s.order_id, s.tracking_number, s.shipment_status, 
       s.estimated_delivery, s.actual_delivery, s.carrier,o.customer_name
FROM shipments s
JOIN orders o ON s.order_id = o.order_id
WHERE o.customer_id = CURRENT_USER();
```
![image](https://github.com/user-attachments/assets/7127aced-1a17-4c9c-83a7-9b569652f634)


📌 用途：包裹追蹤、收貨準備 

4. 倉儲人員（Warehouse）  
> 物流出庫關聯資訊
```sql
CREATE VIEW warehouse_shipments_view AS
SELECT shipment_id, order_id, tracking_number, shipment_status, carrier
FROM shipments;
```

![image](https://github.com/user-attachments/assets/2e0a2577-f028-4315-ad15-b8d8cb1d2076)


📌 用途：物流交接、運單打印 

5. 客服人員（Support）  
> 客戶物流查詢介面
```sql
CREATE VIEW support_shipments_view AS
SELECT shipment_id, order_id, tracking_number, shipment_status, 
       estimated_delivery, actual_delivery, carrier
FROM shipments;
```

![image](https://github.com/user-attachments/assets/5c56b118-b637-4390-8126-fe520bd49900)


📌 用途：物流異常處理、客戶諮詢 

### `warehouse_Transfers` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| transfer_id         |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| from_warehouse_id   |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| to_warehouse_id     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| product_id          |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| quantity            |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| transfer_status     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| transfer_date       |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）  
> 所有倉庫調撥記錄
```sql
CREATE VIEW admin_transfers_view AS
SELECT * FROM warehouse_transfers;
```

![image](https://github.com/user-attachments/assets/a60b5e04-82e5-4519-9d41-505ff9991778)


📌 用途：庫存調度分析、倉庫效能評估 

2. 倉儲人員（Warehouse）  
> 倉庫間調撥作業單
```sql
CREATE VIEW warehouse_transfers_view AS
SELECT * FROM warehouse_transfers;
```
![image](https://github.com/user-attachments/assets/d21ff1bf-7d0e-4e2f-b3e8-ef64e8a2a50b)



## 數據分析

### `sales_Analysis` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id       |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| date           |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| product_id     |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| category_id    |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| total_sales    |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| revenue        |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| average_price  |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 完整銷售分析數據
```sql
CREATE VIEW admin_sales_analysis_view AS
SELECT * FROM sales_analysis;
```
📌 用途：業務決策支持、績效評估 

![image](https://github.com/user-attachments/assets/8408af8d-4791-413b-995b-e18e1f56db94)

2. 賣家（Seller）  
> 賣家銷售績效數據
```sql
CREATE VIEW seller_sales_analysis_view AS
SELECT record_id, date, product_id, category_id, total_sales, revenue, average_price
FROM sales_analysis;
```
📌 用途：銷售策略調整、商品優化 

![image](https://github.com/user-attachments/assets/c74fd2b2-07b9-44dc-900a-3f6344e11ce1)


3. 行銷/營運（Marketing）  
> 銷售趨勢分析數據
```sql
CREATE VIEW marketing_sales_analysis_view AS
SELECT * FROM sales_analysis;
```
📌 用途：促銷活動規劃、市場定位 

![image](https://github.com/user-attachments/assets/db4c3172-8998-4877-98c1-bf4f8a84d722)


### `inventory_Analytics` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id       |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| date           |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| warehouse_id   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| product_id     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| starting_stock |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| ending_stock   |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| sold_units     |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| received_units |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 完整庫存流動數據
```sql
CREATE VIEW admin_inventory_analytics_view AS
SELECT * FROM inventory_analytics;
```
📌 用途：庫存周轉分析、採購策略 

![image](https://github.com/user-attachments/assets/facb037c-75fb-41c0-a05b-795e0a42c67a)


2. 賣家（Seller）  
> 商品庫存流動趨勢
```sql
CREATE VIEW seller_inventory_analytics_view AS
SELECT record_id, date, warehouse_id, product_id, starting_stock, ending_stock, sold_units, received_units
FROM inventory_analytics;
```
📌 用途：庫存健康度監測、補貨預測 

![image](https://github.com/user-attachments/assets/2742b941-da33-4a08-b80b-af37a64e82de)


3. 倉儲人員（Warehouse）  
> 庫存操作效能數據
```sql
CREATE VIEW warehouse_inventory_analytics_view AS
SELECT * FROM inventory_analytics;
```
📌 用途：倉儲效率優化、作業排程 

![image](https://github.com/user-attachments/assets/7740ed91-3898-4626-bcfa-b6540af9eb84)


4. 行銷/營運（Marketing）  
> 商品流動關聯數據
```sql
CREATE VIEW marketing_inventory_analytics_view AS
SELECT record_id, date, warehouse_id, product_id, sold_units, received_units
FROM inventory_analytics;
```
📌 用途：促銷商品選擇、清倉規劃 

![image](https://github.com/user-attachments/assets/28ed8a22-955b-42d1-96b1-64cb90d4f507)


### `order_Conversion_Stats` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id       |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| date           |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| total_visits   |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| total_orders   |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |
| conversion_rate|  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 完整轉換訂單數據
```sql
CREATE VIEW admin_conversion_stats_view AS
SELECT * FROM order_conversion_stats;
```
📌 用途：網站效能評估、業務健康度 

![image](https://github.com/user-attachments/assets/e1469d50-7d38-46ca-aeca-517bced1c074)


2. 行銷/營運（Marketing）  
> 訂單轉換率趨勢
```sql
CREATE VIEW marketing_conversion_stats_view AS
SELECT * FROM order_conversion_stats;
```
📌 用途：廣告投放優化、用戶體驗改進 

![image](https://github.com/user-attachments/assets/f503882d-e320-4a27-9843-bb3995987996)


### `shipment_Performance` 欄位可視權限表
| 欄位                    | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-------------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id               |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| date                   |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| carrier                |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| total_shipments        |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| on_time_deliveries     |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| late_deliveries        |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |
| average_delivery_time  |  ✔   |   ✘   |    ✘     |     ✔     |    ✘    |     ✔     |    ✘    |

1. 系統管理員（Admin）  
> 物流全維度效能數據
```sql
CREATE VIEW admin_shipment_performance_view AS
SELECT * FROM shipment_performance;
```
📌 用途：物流商評估、配送策略 

![image](https://github.com/user-attachments/assets/f90366a4-5fb6-415a-a122-6e6fd997b91c)


2. 倉儲人員（Warehouse）  
> 物流操作效能指標
```sql
CREATE VIEW warehouse_shipment_performance_view AS
SELECT record_id, date, carrier, total_shipments, on_time_deliveries, late_deliveries, average_delivery_time
FROM shipment_performance;
```
📌 用途：出庫流程優化、物流商協調 

![image](https://github.com/user-attachments/assets/fd470bf4-79e7-49bf-8000-9bfe889a3fd3)


3. 行銷/營運（Marketing）  
> 客戶配送體驗數據
```sql
CREATE VIEW marketing_shipment_performance_view AS
SELECT record_id, date, carrier, total_shipments, on_time_deliveries, late_deliveries
FROM shipment_performance;
```
📌 用途：服務承諾設計、客戶溝通 

![image](https://github.com/user-attachments/assets/41b7d5f9-e3cf-454e-ba2f-2a711d7924e2)


### `customer_Feedback_Stats` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| record_id           |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| date               |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| product_id         |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| total_reviews      |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| average_rating     |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| positive_reviews   |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| negative_reviews   |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 完整客戶反饋數據
```sql
CREATE VIEW admin_feedback_stats_view AS
SELECT * FROM customer_feedback_stats;
```

📌 用途：服務品質監控、全面改進 

![image](https://github.com/user-attachments/assets/13ff8b18-63fd-4401-b821-a9c16508871c)

2. 賣家（Seller）  
> 商品評價統計數據
```sql
CREATE VIEW seller_feedback_stats_view AS
SELECT record_id, date, product_id, total_reviews, average_rating, positive_reviews, negative_reviews
FROM customer_feedback_stats;
```
📌 用途：商品改進、評價管理 

![image](https://github.com/user-attachments/assets/1a70ea4f-3b3f-4948-a781-95940a61cfba)


3. 行銷/營運（Marketing）  
> 客戶體驗分析數據
```sql
CREATE VIEW marketing_feedback_stats_view AS
SELECT * FROM customer_feedback_stats;
```
📌 用途：品牌形象管理、忠誠度計劃 

![image](https://github.com/user-attachments/assets/af9b3824-b436-44f5-afae-a82368a1236f)


4. 客服人員（Support）  
> 客戶服務相關反饋
```sql
CREATE VIEW support_feedback_stats_view AS
SELECT record_id, date, product_id, total_reviews, average_rating
FROM customer_feedback_stats;
```
📌 用途：服務品質提升、客訴預防 

![image](https://github.com/user-attachments/assets/fa43e874-1506-4a79-97a3-58f31220e63b)


## 商品管理 & 驗證伺服器

### `products` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| product_id          |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| product_name        |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| sku                 |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✔     |    ✔    |
| brand               |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| model               |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| description         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| category_id         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| variant_type        |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| price               |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✔     |    ✔    |
| promotional_price   |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✔     |    ✔    |
| promotion_start_date|  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| promotion_end_date  |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| seller_id           |  ✔   |   ✔   |    ✘     |     ✘     |    ✘    |     ✔     |    ✔    |
| shipping_weight     |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✘    |
| image_url           |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| barcode             |  ✔   |   ✔   |    ✘     |     ✔     |    ✘    |     ✘     |    ✘    |
| reviews_count       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| favorites_count     |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| date_added          |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| last_updated        |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有產品完整資訊
```sql
CREATE VIEW admin_products_view AS
SELECT * FROM products;
```
📌 用途：產品全生命周期管理與審計 

![image](https://github.com/user-attachments/assets/708144da-a076-4eb1-aba1-60cc92d3ab5d)


2. 賣家（Seller）  
> 賣家自有產品管理介面
```sql
CREATE VIEW seller_products_view AS
SELECT product_id, product_name, sku, brand, model, description, 
       category_id, variant_type, price, promotional_price, 
       promotion_start_date, promotion_end_date, shipping_weight,
       image_url, barcode, reviews_count, favorites_count,
       date_added, last_updated,seller_id
FROM products
WHERE seller_id = CURRENT_USER_ID();
```
📌 用途：商品上架、價格調整與庫存管理 

![image](https://github.com/user-attachments/assets/aea14a8e-7a00-4048-891e-25275bde20fb)


3. 顧客（Customer）  
> 顧客可見產品資訊
```sql
CREATE VIEW customer_products_view AS
SELECT product_id, product_name, brand, model, description,
       category_id, variant_type, price, promotional_price,
       promotion_start_date, promotion_end_date, image_url,
       reviews_count, favorites_count
FROM products
WHERE (promotion_end_date IS NULL OR promotion_end_date >= NOW());
```
📌 用途：商品瀏覽與購買決策 

![image](https://github.com/user-attachments/assets/7fa0709f-19c5-46cb-b942-46a7d32c7ad2)


4. 倉儲人員（Warehouse）  
> 產品物流相關資訊
```sql
CREATE VIEW warehouse_products_view AS
SELECT product_id, product_name, sku, shipping_weight, 
       barcode, last_updated
FROM products;
```
📌 用途：揀貨、包裝與庫存管理 

![image](https://github.com/user-attachments/assets/a914e5b9-5700-4890-a181-5bf07808118f)


5. 行銷/營運（Marketing）  
> 產品銷售分析數據
```sql
CREATE VIEW marketing_products_view AS
SELECT product_id, product_name, brand, category_id,
       price, promotional_price, reviews_count,
       favorites_count, date_added
FROM products;
```
📌 用途：市場定位與促銷策略制定 

![image](https://github.com/user-attachments/assets/f275e020-2d34-4343-a93f-2be27447b5f7)


6. 客服人員（Support）  
> 產品基本查詢資訊
```sql
CREATE VIEW support_products_view AS
SELECT product_id, product_name, brand, model,
       category_id, price, image_url, seller_id
FROM products;
```
📌 用途：客戶諮詢與爭議處理 

![image](https://github.com/user-attachments/assets/231b08c3-d5e6-4192-8bb0-c8a28a82a274)


### `reviews` 欄位可視權限表
| 欄位         | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|--------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| review_id    |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| product_id   |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| user_id      |  ✔   |   ✘   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| rating       |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| comment      |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |
| created_at   |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有產品評論記錄
```sql
CREATE VIEW admin_reviews_view AS
SELECT * FROM reviews;
```
📌 用途：評論內容審核與管理 

![image](https://github.com/user-attachments/assets/78ac2ec8-463b-4ed4-b45b-e66204b04cd6)


2. 賣家（Seller）  
> 賣家產品相關評論
```sql
CREATE VIEW seller_reviews_view AS
SELECT r.review_id, r.product_id, r.rating, r.comment, r.created_at , p.seller_id
FROM reviews r
JOIN products p ON r.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID();
```
📌 用途：產品改進與客戶反饋分析 

![image](https://github.com/user-attachments/assets/700dd17b-7e90-4db0-a2a6-bf982bea7ed8)


3. 顧客（Customer）  
> 所有公開產品評論
```sql
CREATE VIEW customer_reviews_view AS
SELECT review_id, product_id, rating, comment, created_at
FROM reviews;
```
📌 用途：購買決策參考 

![image](https://github.com/user-attachments/assets/228a5ae3-0e17-42a4-9797-6f5cb12b08cb)


4. 行銷/營運（Marketing）  
> 評論統計分析數據
```sql
CREATE VIEW marketing_reviews_view AS
SELECT review_id, product_id, rating, created_at
FROM reviews;
```
📌 用途：產品滿意度評估 

![image](https://github.com/user-attachments/assets/a807d46e-9151-4067-a924-d8a1e200efc1)


5. 客服人員（Support）  
> 評論完整資訊
```sql
CREATE VIEW support_reviews_view AS
SELECT review_id, product_id, user_id, rating, 
       comment, created_at
FROM reviews;
```
📌 用途：不當評論處理與客戶溝通 

![image](https://github.com/user-attachments/assets/dcfd0230-cdf4-4f15-97e5-322f49e68db2)


### `categories ` 欄位可視權限表
| 欄位                | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|---------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| category_id         |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| category_name       |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| category_description|  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有產品分類資訊
```sql
CREATE VIEW admin_categories_view AS
SELECT * FROM categories;
```
📌 用途：分類體系管理與調整 

![image](https://github.com/user-attachments/assets/9f718738-4fcc-46c3-83ba-911dd4d7c2aa)


2. 賣家（Seller）  
> 產品分類結構
```sql
CREATE VIEW seller_categories_view AS
SELECT category_id, category_name, category_description
FROM categories;
```
📌 用途：商品上架分類選擇 

![image](https://github.com/user-attachments/assets/b8775647-ff4d-4582-9cfc-f8c10d54d7b0)


3. 顧客（Customer）  
> 顧客可見分類資訊
```sql
CREATE VIEW customer_categories_view AS
SELECT category_description, category_name
FROM categories;
```
📌 用途：商品分類瀏覽 

![image](https://github.com/user-attachments/assets/b744823e-deee-486e-beb3-fe59638670f4)

4. 行銷/營運（Marketing）  
> 分類完整數據
```sql
CREATE VIEW marketing_categories_view AS
SELECT category_id, category_name, category_description
FROM categories;
```
📌 用途：分類銷售分析與促銷規劃 

![image](https://github.com/user-attachments/assets/d47347e1-3fd1-4a0e-98d9-f7490f9f0513)


### `login_logs ` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| log_id          |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| user_id         |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| email           |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| login_time      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| ip_address      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| user_agent      |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| success         |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| failure_reason  |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |

1. 系統管理員（Admin）  
> 所有用戶登入記錄
```sql
CREATE VIEW admin_login_logs_view AS
SELECT * FROM login_logs;
```
📌 用途：安全審計與異常登入監控 

![image](https://github.com/user-attachments/assets/c700ccd5-1dc7-44e9-8f2b-eb451e75e2ab)

2. 客服人員（Support）  
> 用戶登入狀態查詢
```sql
CREATE VIEW support_login_logs_view AS
SELECT log_id, user_id, login_time, success
FROM login_logs;
```
📌 用途：帳號問題排查 

![image](https://github.com/user-attachments/assets/a7569678-1bbd-44a4-8837-c08a497396df)


### `users ` 欄位可視權限表
| 欄位                  | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| user_id               |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| email                 |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| password_hash         |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✘    |
| account_enable        |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| created_at            |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| failed_login_attempts |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| is_verified           |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |
| updated_at            |  ✔   |   ✘   |    ✘     |     ✘     |    ✘    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有用戶完整資料
```sql
CREATE VIEW admin_users_view AS
SELECT * FROM users;
```
📌 用途：帳號全權限管理 

![image](https://github.com/user-attachments/assets/a06e5dae-696e-4039-9565-b50ccb7e76b2)


2. 客服人員（Support）  
> 用戶基本服務資訊
```sql
CREATE VIEW support_users_view AS
SELECT user_id, email, account_enable, 
       created_at, is_verified
FROM users;
```
📌 用途：帳號問題排查與處理 

![image](https://github.com/user-attachments/assets/585d0a98-6378-40c0-ae8c-9a4c3d0b1109)


## 訂單管理

### `orders` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| order_id        |  ✔   |   ✔   |    ✔     |    ✔     |    ✔    |     ✘     |    ✔    |
| customer_id     |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| order_status    |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| total_amount    |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| created_at      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| updated_at      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| shipping_fee    |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✘     |    ✔    |
| discount        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_id      |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| shipping_id     |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✘     |    ✔    |
| coupon_id       |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有訂單完整資訊
```sql
CREATE VIEW admin_orders_view AS
SELECT * FROM orders;
```
📌 用途：訂單全生命周期管理與審計 

![image](https://github.com/user-attachments/assets/ab79d1f0-c2c2-46d9-9b6a-918e639175f9)


2. 賣家（Seller）  
> 賣家相關訂單資訊
```sql
CREATE  VIEW seller_orders_view AS
SELECT o.order_id, o.customer_id, o.order_status, 
       o.total_amount, o.created_at, o.updated_at,
       o.shipping_fee, o.discount, o.coupon_id,p.seller_id
FROM orders o
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID()
GROUP BY o.order_id;
```
📌 用途：訂單處理與出貨管理 

![image](https://github.com/user-attachments/assets/591e06d8-7c16-4b5a-9d48-d3fc67b7b8c9)


3. 顧客（Customer）  
> 顧客個人訂單記錄
```sql
CREATE VIEW customer_orders_view AS
SELECT order_id, order_status, total_amount, 
       created_at, updated_at, shipping_fee,
       discount, coupon_id , customer_id
FROM orders
WHERE customer_id = CURRENT_USER_ID();
```
📌 用途：訂單狀態追蹤與歷史查詢 

![image](https://github.com/user-attachments/assets/639b7ca8-234e-4d54-9fd3-ba060a1f6a06)


4. 財務人員（Finance）  
> 訂單財務相關資訊
```sql
CREATE VIEW finance_orders_view AS
SELECT order_id, customer_id, total_amount,
       created_at, shipping_fee, discount,
       payment_id, coupon_id
FROM orders;
```
📌 用途：收入確認與財務報表 

![image](https://github.com/user-attachments/assets/62af9212-efb9-456c-b9c5-9ac84d68fe54)


5. 客服人員（Support）  
> 訂單服務查詢資訊
```sql
CREATE VIEW support_orders_view AS
SELECT order_id, customer_id, order_status,
       total_amount, created_at, updated_at,
       shipping_id, coupon_id
FROM orders;
```
📌 用途：客戶訂單問題處理 

6.倉儲人員(Warehouse)
> 訂單倉儲查詢
```sql
CREATE  VIEW warehouse_orders_view AS
SELECT order_id,order_status,total_amount,shipping_fee,shipping_id
FROM orders;
```

![image](https://github.com/user-attachments/assets/db0c5a4a-cdd0-47ad-8b07-19cbc6614c9e)


### `order_items` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| order_item_id   |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| order_id        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| product_id      |  ✔   |   ✔   |    ✔     |     ✔     |    ✘    |     ✔     |    ✔    |
| quantity        |  ✔   |   ✔   |    ✔     |     ✔     |    ✔    |     ✔     |    ✔    |
| unit_price      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |
| subtotal        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✔     |    ✔    |

1. 系統管理員（Admin）  
> 所有訂單商品明細
```sql
CREATE VIEW admin_order_items_view AS
SELECT * FROM order_items;
```
📌 用途：訂單商品全面分析 

![image](https://github.com/user-attachments/assets/659600f7-a30a-4861-a156-7b1e29d0e1f2)


2. 賣家（Seller）  
> 賣家商品訂購明細
```sql
CREATE VIEW seller_order_items_view AS
SELECT oi.order_item_id, oi.order_id, oi.product_id,
       oi.quantity, oi.unit_price, oi.subtotal,p.seller_id
FROM order_items oi
JOIN products p ON oi.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID();
```
📌 用途：銷售統計與庫存預測 

![image](https://github.com/user-attachments/assets/a313001f-a44d-4325-bdc8-17ad0aa73cfb)


3. 顧客（Customer）  
> 個人訂單商品明細
```sql
CREATE OR REPLACE VIEW customer_order_items_view AS
SELECT oi.order_item_id, oi.order_id, oi.product_id,
       oi.quantity, oi.unit_price, oi.subtotal,o.customer_id
FROM order_items oi
JOIN orders o ON oi.order_id = o.order_id
WHERE o.customer_id = CURRENT_USER_ID();
```
📌 用途：訂單詳情查看與再次購買 

![image](https://github.com/user-attachments/assets/ad2197f3-bbe7-45b3-904d-7b96d617434a)


4. 財務人員（Finance）  
> 訂單商品財務數據
```sql
CREATE VIEW finance_order_items_view AS
SELECT order_item_id, order_id, product_id,
       quantity, unit_price, subtotal
FROM order_items;
```
📌 用途：收入分攤與成本核算

![image](https://github.com/user-attachments/assets/e6de60f6-8357-457d-99a3-62486d4d0caa)


5. 客服人員（Support）  
> 訂單商品查詢資訊
```sql
CREATE VIEW support_order_items_view AS
SELECT order_item_id, order_id, product_id,
       quantity, unit_price, subtotal
FROM order_items;
```
📌 用途：退換貨與訂單爭議處理 

![image](https://github.com/user-attachments/assets/35436ca4-cfcd-44cd-8bf0-6288b138fe43)


### `payments` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| payment_id      |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_method  |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_status  |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| amount          |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| payment_date    |  ✔   |   ✘   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有付款交易記錄
```sql
CREATE VIEW admin_payments_view AS
SELECT * FROM payments;
```
📌 用途：支付全流程監控與異常處理 

![image](https://github.com/user-attachments/assets/72e89f8a-999c-43d2-abfd-952b2722a0b4)


2. 顧客（Customer）  
> 個人支付記錄
```sql
CREATE OR REPLACE VIEW customer_payments_view AS
SELECT p.payment_id, p.payment_method,
       p.payment_status, p.amount, p.payment_date,o.customer_id,o.order_id
FROM payments p
JOIN orders o ON p.payment_id = o.payment_id
WHERE o.customer_id = CURRENT_USER_ID();
```
📌 用途：支付憑證查詢與退款申請 

![image](https://github.com/user-attachments/assets/43d69954-2361-44d9-9db9-846382be9a0a)


3. 財務人員（Finance）  
> 完整付款財務資料
```sql
CREATE VIEW finance_payments_view AS
SELECT p.payment_id, p.payment_method,
       p.payment_status, p.amount, p.payment_date , o.order_id
FROM payments p
JOIN orders o ON p.payment_id = o.payment_id;
```
📌 用途：賬務處理與銀行對賬 

![image](https://github.com/user-attachments/assets/4190f2d2-d3a3-422f-95e2-52d72ce314e0)


4. 客服人員（Support）  
> 客戶支付查詢介面
```sql
CREATE VIEW support_payments_view AS
SELECT p.payment_id, o.order_id, p.payment_method,
       p.payment_status, p.amount, p.payment_date
FROM payments p
JOIN orders o ON p.payment_id = o.payment_id;
```
📌 用途：支付問題排查與退款處理 

![image](https://github.com/user-attachments/assets/6c3ad93e-0610-429f-8c77-22310738a52b)


### `return_refunds` 欄位可視權限表
| 欄位            | Admin | Seller | Customer | Warehouse | Finance | Marketing | Support |
|-----------------|:-----:|:------:|:--------:|:---------:|:-------:|:---------:|:-------:|
| refund_id       |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| order_id        |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| product_id      |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| reason          |  ✔   |   ✔   |    ✔     |     ✘     |    ✘    |     ✘     |    ✔    |
| status          |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| refund_amount   |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |
| created_at      |  ✔   |   ✔   |    ✔     |     ✘     |    ✔    |     ✘     |    ✔    |

1. 系統管理員（Admin）  
> 所有退貨退款記錄
```sql
CREATE VIEW admin_return_refunds_view AS
SELECT * FROM return_refunds;
```
📌 用途：退貨率分析與流程優化 

![image](https://github.com/user-attachments/assets/14c4e78a-373c-4435-8508-74c92b88cb8b)


2. 賣家（Seller）  
> 賣家商品退貨申請
```sql
CREATE VIEW seller_return_refunds_view AS
SELECT rr.refund_id, rr.order_id, rr.product_id,
       rr.reason, rr.status, rr.refund_amount, rr.created_at
       ,p.seller_id
FROM return_refunds rr
JOIN products p ON rr.product_id = p.product_id
WHERE p.seller_id = CURRENT_USER_ID();
```
📌 用途：退貨審核與庫存恢復 

![image](https://github.com/user-attachments/assets/aa187ceb-6907-472a-9e5d-8479a67b3fb4)


3. 顧客（Customer）  
> 個人退貨退款記錄
```sql
CREATE VIEW customer_return_refunds_view AS
SELECT rr.refund_id, rr.order_id, rr.product_id,
       rr.reason, rr.status, rr.refund_amount, rr.created_at
       ,o.customer_id
FROM return_refunds rr
JOIN orders o ON rr.order_id = o.order_id
WHERE o.customer_id = CURRENT_USER_ID();
```
📌 用途：退貨進度查詢與追蹤 

![image](https://github.com/user-attachments/assets/115176b6-5c2c-4589-abbc-4bd783cf6d76)


5. 財務人員（Finance）  
> 退款財務資料
```sql
CREATE VIEW finance_return_refunds_view AS
SELECT refund_id, order_id, product_id,
       status, refund_amount, created_at
FROM return_refunds;
```
📌 用途：退款處理與賬務調整 

![image](https://github.com/user-attachments/assets/a69609e7-3ce4-49e2-bb0e-80e17c130ffb)


7. 客服人員（Support）  
> 退貨退款全資訊
```sql
CREATE VIEW support_return_refunds_view AS
SELECT refund_id, order_id, product_id,
       reason, status, refund_amount, created_at
FROM return_refunds;
```
📌 用途：退貨流程處理與客戶溝通 

![image](https://github.com/user-attachments/assets/d0cf33be-8bb0-4950-a28e-0eb3521d82a5)


## TableExample
* [Click me 👇](https://github.com/EZ-Super/Database-System-Course-Final-Project/blob/main/File/TableExample.md)
